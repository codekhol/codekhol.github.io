<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<title>Info Guide NET001</title>
<style type="text/css"><!--
	body { font-family: Arial, Helvetica, sans-serif; }

//-->
</style>
<meta name="generator" content="Microsoft FrontPage 3.0">
</head>

<body background="../../../images/mits-bg5.gif" bgcolor="#ffffff" link="#d60029"
alink="#d60029" vlink="#800080" leftmargin="0" marginwidth="0" marginheight="6">
<!-- Header - start of top table -->
<table border="0" cellpadding="0" cellspacing="0" width="98%">
<!-- The top table has the Mitsubishi logo and Home button -->
  <tr>
    <td valign="top"><img src="../../../images/m-logo-s.gif" width="193" height="70" alt="Mitsubishi Electric - Computing for a Connected World"></td>
        <td valign="bottom" align="right"><a href="../../../default.htm"><img width="41" height="32" src="../../../images/bt-home.gif" alt="Insight CD Home Page" border="0"></a></td>
  </tr>
  <tr>
    <td width="98%" colspan="2" bgcolor="#000000"><img width="1" height="1" src="../../../images/space.gif"><br>
    </td>
  </tr>
</table>
<!-- end of top table -->


<table border="0" cellpadding="0" cellspacing="0" width="98%">
  <tr>
    <td width="10" bgcolor="#000000"><img width="10" height="10"
    src="../../../images/space.gif"></td>
    <td width="120" valign="top" align="left" bgcolor="#000000"><script LANGUAGE="JavaScript">

<!--

        if (document.images) {

          var product1 = new Image()
          product1.src = "/insight/images/product1.gif"
          var product2 = new Image()
          product2.src = "/insight/images/product2.gif"

          var service1 = new Image()
          service1.src = "/insight/images/service1.gif"
          var service2 = new Image()
          service2.src = "/insight/images/service2.gif"

          var kbase1 = new Image()
          kbase1.src = "/insight/images/kbase1.gif"
          var kbase2 = new Image()
          kbase2.src = "/insight/images/kbase2.gif"       

          var upgrade1 = new Image()
          upgrade1.src = "/insight/images/upgrade1.gif"
          var upgrade2 = new Image()
          upgrade2.src = "/insight/images/upgrade2.gif"       

          var downlo1 = new Image()
          downlo1.src = "/insight/images/downlo1.gif"
          var downlo2 = new Image()
          downlo2.src = "/insight/images/downlo2.gif"       

          var inserv1 = new Image()
          inserv1.src = "/insight/images/inserv1.gif"
          var inserv2 = new Image()
          inserv2.src = "/insight/images/inserv2.gif"       

          var email1 = new Image()
          email1.src = "/insight/images/email1.gif"
          var email2 = new Image()
          email2.src = "/insight/images/email2.gif"       

          var search1 = new Image()
          search1.src = "/insight/images/search1.gif"
          var search2 = new Image()
          search2.src = "/insight/images/search2.gif"       

          var y20001 = new Image()
          y20001.src = "/insight/images/y2001.gif"
          var y20002 = new Image()
          y20002.src = "/insight/images/y2002.gif"

          var osites1 = new Image()
          osites1.src = "/insight/images/osites1.gif"
          var osites2 = new Image()
          osites2.src = "/insight/images/osites2.gif"

          var disclaim1 = new Image()
          disclaim1.src = "/insight/images/disclam1.gif"
          var disclaim2 = new Image()
          disclaim2.src = "/insight/images/disclam2.gif"

        }



        function act(imgName) {
          if (document.images)
            document[imgName].src = eval(imgName + '2.src')
        }



        function inact(imgName) {
          if (document.images)
            document[imgName].src = eval(imgName + '1.src')
        }

        // -->
</script>


    <a HREF="../../../products/main.htm" onMouseOver="act('product')" onMouseOut="inact('product')"><img width="113" height="22" src="../../../images/product1.gif" name="product" alt="Products" border="0"></a><br>

    <a HREF="../../../services/main.htm" onMouseOver="act('service')" onMouseOut="inact('service')"><img width="113" height="22" src="../../../images/service1.gif" name="service" alt="Services" border="0"></a><br>

    <a HREF="../../main.htm"><img width="113" height="22" src="../../../images/kbase2.gif" name="kbase" alt="Knowledgebase" border="0"></a><br>
       <a HREF="../../ipb/ipbmain.htm"><img width="113" height="17" src="../../../images/s_ipb.gif" alt="Bulletins (IPBs)" border="0"></a><br>
       <a HREF="../guidecon.htm"><img width="113" height="17" src="../../../images/s_guides.gif" alt="Guides" border="0"></a><br>
       <a HREF="../../faq/main.htm"><img width="113" height="17" src="../../../images/s_faq.gif" alt="FAQs" border="0"></a><br>
       <a HREF="../manuals/menu.htm"><img width="113" height="17" src="../../../images/s_manual.gif" alt="Owner's Handbooks" border="0"></a><br>
       <a HREF="../../../common/infact/menu.htm"><img width="113" height="17" src="../../../images/s_datash.gif" alt="Product Datasheets" border="0"></a><br>
       <a HREF="../../../common/misc/menu.htm"><img width="113" height="17" src="../../../images/s_misc.gif" alt="Miscellaneous Items" border="0"></a><br>

    <a HREF="../../../upgrades/main.htm" onMouseOver="act('upgrade')" onMouseOut="inact('upgrade')"><img width="113" height="22" src="../../../images/upgrade1.gif" name="upgrade" alt="Upgrades" border="0"></a><br>

    <a HREF="../../../download/main.htm" onMouseOver="act('downlo')" onMouseOut="inact('downlo')"><img width="113" height="22" src="../../../images/downlo1.gif" name="downlo" alt="Downloads" border="0"></a><br>

    <a HREF="../../../insindex.exe" onMouseOver="act('search')" onMouseOut="inact('search')"><img width="113" height="22" src="../../../images/search1.gif" name="search" alt="Search Insight" border="0"></a><br>
    <a HREF="mailto:insight@mitsubishi-computers.com" onMouseOver="act('email')" onMouseOut="inact('email')"><img width="113" height="22" src="../../../images/email1.gif" name="email" alt="E-Mail us" border="0"></a><br>
    <a HREF="http://www.mitsubishi-computers.com/support/service/" onMouseOver="act('inserv')" onMouseOut="inact('inserv')"><img width="113" height="22" src="../../../images/inserv1.gif" name="inserv" alt="Insight Service" border="0"></a><br>

    <a HREF="../../../common/year2000/year2000.htm" onMouseOver="act('y2000')" onMouseOut="inact('y2000')"><img width="113" height="21" src="../../../images/y2001.gif" name="y2000" alt="Year 2000" border="0"></a><br>
    <a HREF="../../../common/oth-site/oth-site.htm" onMouseOver="act('osites')" onMouseOut="inact('osites')"><img width="113" height="38" src="../../../images/osites1.gif" name="osites" alt="Other Mitsubishi Sites" border="0"></a><br>
    <a HREF="../../../common/disclaim.htm" onMouseOver="act('disclaim')" onMouseOut="inact('disclaim')"><img width="113" height="24" src="../../../images/disclam1.gif" name="disclaim" alt="Site Disclaimer" border="0"></a><br>
      
    <img width="113" height="120" src="../../../images/space.gif"><br>
</td>
    <td width="10" valign="top" width="10" height="10" src="/insight/images/space.gif"
    alt="10 pixel Gap" border="0"></td>

    <td valign="top"><font size="2"><br>
    </font><font face="Arial,Helvetica" size="4" color="#D60029"><strong>Info Guide NET001: <br>
    NetWare 4.01 Recommendations</strong></font><font size="2"> </font><blockquote>
      <p><a href="#net001_1"><font size="2">Checking the NDS Revision Level</font></a></p>
      <p><font size="2"><a href="#net001_2">Other NetWare 4 Patches and Updates</a></font></p>
      <p><font size="2"><a href="#net001_3">NDS Synchronisation Issues</a></font></p>
      <p><font size="2"><a href="#net001_4">Directory Tools</a> </font><ul>
        <li><font size="2">Using DSREPAIR.NLM<br>
          </font></li>
        <li><font size="2">Using DSTRACE<br>
          </font></li>
        <li><font size="2">Using DSVIEW.NLM</font></li>
      </ul>
      <p><font size="2"><a href="#net001_5">Installation and Migration Issues</a> </font><ul>
        <li><font size="2">Proper Use of the INSTALL Utility<br>
          </font></li>
        <li><font size="2">Installing NetWare 4 Servers into New and Existing Directory Tree<br>
          </font></li>
        <li><font size="2">Removing Directory Services with INSTALL</font></li>
      </ul>
      <p><a href="#net001_6"><font size="2">Changing a Server&#146;s Name or Internal IPX
      Address</font></a></p>
      <p><font size="2"><a href="#net001_7">Removing the Server from the Directory Tree</a></font></p>
      <p><font size="2"><a href="#net001_8">Don&#146;t Let Volume SYS Run Out of Space</a></font></p>
      <p><font size="2"><a href="#net001_9">Determining the Size of the NDS Partition on the
      Fileserver</a></font></p>
      <p><font size="2"><a href="#net001_10">Miscellaneous Tips</a><br>
      </font></p>
    </blockquote>
    <p>&nbsp;</p>
    <p><font size="2">(15th April 1994) </font></p>
    <hr>
    <p><a name="net001_1"></a><font size="3"><strong>Checking the NDS Revision Level</strong></font></p>
    <p><font size="2">NetWare 4.01 was shipped with DS.NLM at revision level 290. However, all
    NetWare 4 servers must be patched to use the 296 level of NDS. This is the most important
    service change to enhance NDS reliability. The patch to upgrade from 290 to 296 level of
    DS.NLM is called DSPAT2.EXE, and it is applied to the SERVER.EXE. (DSPAT2.EXE is available
    on Apricot <strong>Insight BBS</strong> AREA37 as part of 401PT1.EXE, a self-extracting
    file containing a number of NetWare 4.01 patches and up dates. </font></p>
    <p><font size="2">The revision level of Directory Services on any server can be determined
    by using the MODULES command at the server prompt. The change level is in parentheses
    following the module name, as shown below: </font></p>
    <blockquote>
      <p><font size="2">DS.NLM<br>
      NetWare Directory Services (296)<br>
      Version 4.01 25 February 1994 </font></p>
    </blockquote>
    <p><font size="2"><br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="net001_2"></a><font size="3"><strong>Other NetWare 4 Patches and Updates</strong></font></p>
    <p><font size="2">It is beneficial to keep up to date on the latest patches and updates
    for NetWare 4. An up-to-date list of all NetWare patches can be found in the following
    file: </font></p>
    <blockquote>
      <p><font size="2">NWUPDATE.TXT Available from Apricot <strong>Insight BBS</strong> AREA37 </font></p>
    </blockquote>
    <p><font size="2">Since the release of NetWare 4.01, several fixes to Directory Services
    have been made. These and a number of other patches have recently been consolidated into
    the following file: </font></p>
    <blockquote>
      <p><font size="2">401PT1.EXE Available from Apricot <strong>Insight BBS</strong> AREA37 </font></p>
    </blockquote>
    <p><font size="2">We strongly suggest you apply this group of patches for NetWare 4.01. <br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="net001_3"></a><font size="3"><strong>NDS Synchronisation Issues</strong></font></p>
    <p><font size="2">Allow time for the Directory to synchronise. Often not enough time is
    allowed for the Directory to synchronise after changes are made. Any significant
    operation, such as placing a new replica on a server, removing a replica, or rebuilding a
    replica from the master, can require some time to complete because of the large amounts of
    data that are exchanged between replicas. </font></p>
    <p><font size="2">The time required to complete the operation is largely a function of the
    available bandwidth in the network, the size of the replicas, the number of replicas, and
    the state of servers and links. Novell have experienced times ranging from a few seconds
    to an hour or more for partition and replica operations. Be patient, when the data is all
    transferred, the operation will complete. </font></p>
    <p><font size="2"><em>Note</em>: In operations where large amounts of information are
    processed over very fast network links, the server processor speed can become a limiting
    factor. Take this into consideration when performing partition and replica operations. </font></p>
    <p><font size="2">The NetWare 4 partition management utilities (PARTMGR or the Partition
    Manager tool in NWAdmin) are used to request partition and replica operations. However, it
    is important to understand how these utilities function. When you request one of these
    operations, the utility returns control to your workstation immediately so you can
    continue working. Meanwhile, the actual operation is occurring in the background. </font></p>
    <p><font size="2">You can use the partition management utilities to see if the partition
    has been placed on or removed from the requested server. Just remember that some
    operations can take an hour or more to complete, depending on the size of the partition
    and the other factors mentioned above. <br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="net001_4"></a><font size="3"><strong>Directory Tools</strong></font></p>
    <p><font size="2"><strong>Using DSREPAIR.NLM<br>
    </strong>The DSREPAIR.NLM utility is provided with NetWare 4 to repair problems with the
    Directory Services Database on a single server. It does not correct problems on other
    servers. It must be run on each server on which you wish to correct Directory database
    errors. </font></p>
    <p><font size="2">DSREPAIR checks the following information in the Directory: </font><ul>
      <li><font size="2">The local Directory tree structure </font></li>
      <li><font size="2">The records that make up the Directory on the server </font></li>
      <li><font size="2">The schema of the Directory </font></li>
      <li><font size="2">Objects in replicas<br>
        - Local references<br>
        - Mandatory and optional properties </font></li>
      <li><font size="2">Initial states </font></li>
      <li><font size="2">File system trustees on mounted volumes </font></li>
      <li><font size="2">Mail directories </font></li>
      <li><font size="2">Stream syntax files </font></li>
    </ul>
    <p><font size="2">DSREPAIR will also allow the designation of a new master replica for a
    partition. This option is usually used to create a new master for a partition which has
    lost its master through physical server failure. </font></p>
    <p><font size="2">DSREPAIR will not do the following: </font><ul>
      <li><font size="2">Check or perform replica synchronisation </font></li>
      <li><font size="2">Check or perform schema synchronisation </font></li>
      <li><font size="2">Repair all initial states </font></li>
      <li><font size="2">Guarantee local database recovery </font></li>
      <li><font size="2">Remove lost Server objects </font></li>
      <li><font size="2">Configure time synchronisation </font></li>
      <li><font size="2">Synchronise repairs with other replicas (you need to synchronise damaged
        replicas manually using partition manager) </font></li>
    </ul>
    <p><font size="2">DSREPAIR changes inconsistent objects to Unknown objects when they do
    not have mandatory properties or are invalid in other respects (their properties
    don&#146;t meet minimum requirements for an object type). Unknown objects can be deleted
    but cannot be changed back to their original object type. (In NetWare 4.01, Unknown
    objects are represented by question mark icons in the NWAdmin utility.) </font></p>
    <p><font size="2"><strong>Using DSTRACE<br>
    </strong>NetWare Directory Services contains a simple tool that was originally used by the
    development engineers to monitor how NDS is functioning. While it was not designed as an
    end-user tool, DSTRACE can often be used to help to identify problems which may be related
    to NDS. </font></p>
    <p><font size="2">To start DSTRACE, type the following from the server console: </font></p>
    <blockquote>
      <p><font size="2" face="Courier New">SET DSTRACE = ON </font></p>
    </blockquote>
    <p><font size="2">DSTRACE creates another server screen which will display information
    about the NDS synchronisation process. Access this screen by pressing
    &lt;Alt&gt;&lt;Esc&gt; to cycle through the available server screens. </font></p>
    <p><font size="2">You may use the following optional DSTRACE commands</font></p>
    <blockquote>
      <table border="0">
        <tr>
          <td><font size="2" face="Courier New">SET TTF = ON </font></td>
          <td><font size="2" face="Courier New">Redirects trace information to a file
          (SYS:SYSTEM\DSTRACE.DBG)</font></td>
        </tr>
        <tr>
          <td><font size="2" face="Courier New">SET DSTRACE = *r </font></td>
          <td><font size="2" face="Courier New">Resets the trace file</font></td>
        </tr>
        <tr>
          <td><font size="2" face="Courier New">SET TTF = OFF </font></td>
          <td><font size="2" face="Courier New">Ends the trace to file</font></td>
        </tr>
      </table>
    </blockquote>
    <p><font size="2">Note: If you turn on the TTF option, make sure you turn it off when you
    are done. Doing so will eliminate the overhead of writing trace information to the file.
    By default, the trace file will take no more than 1 MB of disk space. If the file reaches
    1 MB, it will cycle around and start to write over the oldest information. </font></p>
    <p><font size="2">To edit the trace file from the server console, type the following
    command: </font></p>
    <blockquote>
      <p><font size="2" face="Courier New">LOAD EDIT SYS:SYSTEM\DSTRACE.DBG </font></p>
    </blockquote>
    <p><font size="2">You can use DSTRACE to determine the &#147;health&#148; of a replica
    ring. To do so, watch the DSTRACE screen as the server contacts each member of its replica
    ring. When each contact ends with the &#147;All Processed = YES&#148; message, you can be
    reasonably sure that the partition is intact. You can then use the partition management
    utilities to perform your desired task. </font></p>
    <p><strong><font size="2">Using DSVIEW.NLM</font></strong></p>
    <p><font size="2">DSVIEW.NLM is available in the self extracting DSVIEW.EXE file on
    Apricot <strong>Insight BBS</strong> AREA&nbsp;37. This utility can be used to view
    information about Directory partitions residing on a single server. It will not display
    information about partitions stored on other NetWare 4 servers. </font></p>
    <p><font size="2">To run DSVIEW.NLM, use RCONSOLE.EXE or go the console of the server
    where the NLM will be run and type LOAD DSVIEW. </font></p>
    <p><font size="2">The following information categories may be selected from the main menu:
    </font><ol>
      <li><font size="2">Entry Information. Use this option to view information about the entries
        themselves (entries such as local ID, base class, creation time, subordinates, attributes,
        and attribute values). You can also navigate through the entries by &#147;walking&#148;
        the tree-for example, going from parent to child or from sibling to sibling.<br>
        <br>
        </font></li>
      <li><font size="2">Partition Information. The option displays the partitions located on the
        server.<br>
        <br>
        </font></li>
      <li><font size="2">Tree (Start at [Root]). This option displays the entries, beginning at
        [Root]. This is a quick way to return to the top of the tree.<br>
        <br>
        </font></li>
      <li><font size="2">Attribute Definitions. This option displays the attributes (properties)
        defined by the schema.<br>
        <br>
        </font></li>
      <li><font size="2">Class Definitions. This option displays the classes defined by the
        schema.<br>
        <br>
        </font></li>
      <li><font size="2">Server Information. This option displays information specific to the
        local server (such as name, address, file size of NDS database, and so on). </font></li>
    </ol>
    <p><font size="2"><br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="net001_5"></a><font size="3"><strong>Installation and Migration Issues</strong></font></p>
    <p><font size="2"><strong>Proper Use of the INSTALL Utility<br>
    </strong>The way customers occasionally misuse the install utility is another source of
    challenges in NetWare 4. The following review of how Install works will help you
    understand how best to use this utility. </font></p>
    <p><font size="2">Note: This discussion applies only to the version of Install that
    originally shipped with NetWare 4.01. The Install utility is currently being revised so
    that it does not create partitions in the way described below. The new version will be put
    on Apricot Insight when it is available. </font></p>
    <p><font size="2"><strong>Installing NetWare 4 Servers into New and Existing Directory
    Tree<br>
    </strong>When a server is being installed into a new OU that does not yet exist in the
    Directory, Install will create a new partition and store the Master replica of that
    partition on the newly installed server. </font></p>
    <p><font size="2">If the server is being installed into an OU that has already been
    created in the tree, Install will ask if the replica of the partition the server is being
    installed into should be created on this server. Many installers answer affirmatively to
    this prompt. </font></p>
    <p><font size="2">Note: Install will not prompt the user about whether a replica should be
    created if the server being installed is an upgrade from NetWare 3.1x to NetWare 4. By
    default, Install will create a replica on the server and upgrade the 3.1x bindery to the
    server&#146;s context. </font></p>
    <p><font size="2">With large Directories, our experience has shown that it is better to
    answer &#147;no&#148; to this prompt. Install will wait for only a few minutes for the
    requested replica to be installed on the new server. If the replica has not been placed on
    the server during the short time allowed, the Install process fails. </font></p>
    <p><font size="2">When installing a new server in an existing NetWare 4 Directory tree, we
    recommend that you create the new target OU, if needed, with the NetWare 4 administration
    utilities (NETADMIN or NWAdmin). Do not use Install to create the OU unless this is the
    first server in the tree. After the server has been successfully installed into the
    Directory, you can create a replica on the server with the partition management utilities.
    </font></p>
    <p><font size="2">By using this alternate strategy, you can install the server in less
    time and eliminate troublesome errors. You can also grant rights to a subtree
    administrator to install the server if the partitioning is done first. </font></p>
    <p><font size="2">To install a server into the tree, use the following procedure: </font><ol>
      <li><font size="2">Use DSTRACE to make sure the replica ring containing the OU (or the
        parent OU) where the server is to be installed is healthy.(See the section on DSTRACE for
        more information)<br>
        <br>
        </font></li>
      <li><font size="2">Ensure that the container into which the server will be installed exists
        before the installation begins. Don&#146;t use Install to create the new partion. When
        Install asks if you would like a copy of this partion on your server, we recommend that
        you decline the option.<br>
        <br>
        </font></li>
      <li><font size="2">After installation, again use DSTRACE to make sure the replica ring is
        synchronised and healthy.<br>
        <br>
        </font></li>
      <li><font size="2">If you need a replica on the newly installed server, use the partion
        management tools to create it. Refer to Utilities Reference manual for instructions. </font></li>
    </ol>
    <p><font size="2">It is also a good idea to make sure the bindery context on the newly
    installed server is set to the correct OU. You can use either the SERVMAN NLM or the SET
    command. To use the SET command, type the following at the console prompt: </font></p>
    <blockquote>
      <p><font size="2" face="Courier New">SET BINDERY CONTEXT &lt;Enter&gt; </font></p>
    </blockquote>
    <p><font size="2">Do not include an &#147;=&#147; sign (as in <font face="Courier New">SET
    BINDERY CONTEXT =</font>) or else the bindery context will be set to nothing. </font></p>
    <p><strong><font size="2">Removing Directory Services with INSTALL</font></strong></p>
    <p><font size="2">Currently, improper use of the Install utility&#146;s option to remove
    Directory Services from a server is a source of Directory problems. When users experience
    problems with most software packages, a typical reaction is to try unloading the software
    and reloading it. This is not an appropriate tactic when working with NDS. In fact, if
    done often enough in a short time, this procedure can result in an improperly synchronised
    Directory. </font></p>
    <p><font size="2">It is rarely necessary to remove Directory Services. We recommend that
    you remove NDS only if you are sure that this step will assist in your recovery process.
    You should have previously tried removing and reinstalling replicas with the partition
    management utilities. Remember to allow plenty of time for synchronisation to occur when
    objects in the Directory are changed. <br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="net001_6"></a><font size="3"><strong>Changing a Server&#146;s Name or Internal
    IPX Address</strong></font></p>
    <p><font size="2">NDS system information is stored on each NetWare 4 server.
    Server-related information is also used in various Directory Services operations. For
    example, the server name and internal IPX address is associated with the location of each
    replica. The proper procedure for changing a NetWare 4 server&#146;s name or internal IPX
    address is as follows: </font><ol>
      <li><font size="2">Change the appropriate lines in the AUTOEXEC.NCF file. </font></li>
      <li><font size="2">Down the server. The new server name and/or address will take effect when
        the server is brought back up again. </font></li>
    </ol>
    <p><font size="2">Allow sufficient time for these changes to be synchronised across the
    Directory. You can force the process that updates the server names and IPX addresses
    within the tree by using the DSTRACE command. At the server console, first type <font
    face="Courier New">SET DSTRACE=ON</font> and then <font face="Courier New">SET DSTRACE=*L</font>.
    </font></p>
    <p><font size="2"><em>Note</em>: In the next release of NetWare 4, the procedure for
    changing server names and addresses will be significantly enhanced. <br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="net001_7"></a><font size="3"><strong>Removing the Server from the Directory
    Tree</strong></font></p>
    <p><font size="2">Servers may need to be removed from the tree for various reasons, but
    this procedure should not usually be necessary. Whenever possible, it is best to remove
    the server while it is still operational and the Directory can be properly updated. Proper
    removal of servers can significantly reduce the occurrence of problems with the Directory.
    Do not just turn off a NetWare 4 server and detach it from the network! Follow the correct
    procedures as outlined below. </font></p>
    <p><font size="2">If the server is operational and the Directory is synchronised, use the
    following procedure to remove the server from the tree: </font><ol>
      <li><font size="2">Before removing the server, check the &#147;health&#148; of its replica
        ring using the procedure above in the DSTRACE section.<br>
        <br>
        </font></li>
      <li><font size="2">Using the partition manager tool in NWAdmin or the PARTMGR utility,
        designate a new Master replica for any Master which exists on the server to be removed.
        Allow sufficient time for the Directory to synchronise the new Master replica&#146;s
        location information in all other replicas of the partition. (Look for the message
        &#147;All Processed=Yes&#148; on the DSTRACE screen.)<br>
        <br>
        </font></li>
      <li><font size="2">Again using NWAdmin or PARTMGR, delete all replicas from the server to be
        removed. Allow sufficient time for the Directory to synchronise the other replicas of each
        partition (&#147;All Processed=Yes&#148; on the DSTRACE screen).<br>
        <br>
        </font></li>
      <li><font size="2">Load the Install utility on the server to be removed. Select the
        &#147;remove Directory Services&#148; option to delete NDS from the server. Again, allow
        sufficient time for the Directory to synchronise each of the replicas of the partition
        which held the server object.<br>
        <br>
        </font></li>
      <li><font size="2">Turn off the server and remove it from the network. </font></li>
    </ol>
    <p><font size="2">To remove a server from the tree if the server has failed or is not
    available for some reason: </font><ol>
      <li><font size="2">If the failed server had any Master replicas on it, you must designate a
        new location for the Master replica of that partition. To do this, follow the procedure
        below for each Master replica to be designated.<br>
        <br>
        </font><ol>
          <li type="A"><font size="2">Select another server that contains a replica of the partition,
            to be designated as the new Master.<br>
            <br>
            </font></li>
          <li type="A"><font size="2">Using DSREPAIR, use option number 1 which allows you to change
            the repair options. Then select option 4 to designate the partition to be a Master. Return
            to the first DSREPAIR menu and repair the Directory, selecting the correct replicas to be
            designated as Masters.<br>
            <br>
            </font></li>
          <li type="A"><font size="2">If the server contained any other Master replicas, repeat the
            above procedure for each one.<br>
            <br>
            </font></li>
        </ol>
      </li>
      <li><font size="2">Using the administrative utilities (NWAdmin or NETADMIN), delete the
        Server object and its Volume objects from the Directory. Allow the Directory sufficient
        time to synchronise before performing other major Directory operations.<br>
        <br>
        </font></li>
    </ol>
    <p><font size="2"><a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top"
    align="left" border="0" hspace="0" width="14" height="10"></a> <a href="#top"><img
    src="../../../graphics/redarr01.gif" alt="Back to Top" align="right" border="0" hspace="0"
    width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="net001_8"></a><font size="3"><strong>Don&#146;t Let Volume SYS Run Out of
    Space</strong></font></p>
    <p><font size="2">A NetWare 4 server&#146;s SYS volume contains the NDS database in a
    hidden directory. This directory cannot be seen even with the NetWare NDIR command. The
    only way to view the size of the NDS is to use RCONSOLE and do a directory scan of
    SYS:_NETWARE. It is imperative that SYS not run out of disk space. If volume SYS becomes
    full, it causes NetWare&#146;s Transaction Tracking System (TTS) to shut down. NDS tracks
    all writes to its database with TTS. If TTS is disabled, writing information to the
    Directory is also disabled. Writes to the Directory will not be allowed until TTS is
    enabled. </font></p>
    <p><font size="2">Note: Even if TTS is disabled, users can still log in to delete unneeded
    files and thus free up more disk space in SYS. </font></p>
    <p><font size="2">To prevent a server running out of space in SYS, we recommend the
    following: </font><ul>
      <li><font size="2">Set minimum disk space alerts so that you get a warning if the remaining
        space on SYS drops below the minimum. By default, NetWare sends a broadcast alert when the
        remaining space on a volume reaches 256 blocks. You can adjust the Volume Low Warning
        Threshold with the SET command at the server.<br>
        <br>
        </font></li>
      <li><font size="2">Store users files and application files on a volume other than SYS.<br>
        <br>
        </font></li>
      <li><font size="2">Store print queues on a volume other than SYS.<br>
        <br>
        </font></li>
    </ul>
    <p><font size="2">We also recommend that you put the following statement in the
    server&#146;s STARTUP.NCF file: </font></p>
    <blockquote>
      <p><font size="2" face="Courier New">SET AUTO TTS BACKOUT FLAG = ON</font></p>
    </blockquote>
    <p><font size="2">This flag causes the TTS systems to automatically back out all
    transactions which were not complete when the server failed. This eliminates the need for
    the administrator or server operator to respond to the TTS-related prompts when the server
    comes up after a failure. <br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="net001_9"></a><font size="3"><strong>Determining the Size of the NDS Partition
    on the Fileserver</strong></font></p>
    <p><font size="2">You can only determine the size of the NDS partition on the fileserver
    by using RCONSOLE this is because the directory were the NDS information is stored is not
    visible by any other means. </font></p>
    <p><font size="2">The NDS information is stored in a directory called SYS:_NETWARE. You
    can access this directory by doing the following: </font><ol>
      <li><font size="2">Run RCONSOLE.<br>
        <br>
        </font></li>
      <li><font size="2">Choose the target file server.<br>
        <br>
        </font></li>
      <li><font size="2">Press <font face="Courier New">&lt;Alt&gt;+&lt;F1&gt;</font>.<br>
        <br>
        </font></li>
      <li><font size="2">Select Directory Scan. <br>
        <br>
        </font></li>
      <li><font size="2">Type the following path and press <font face="Courier New">&lt;Enter&gt;</font>:
        </font><menu>
          <li><font size="2"><font face="Courier New">SYS:_NETWARE</font> </font></li>
        </menu>
      </li>
    </ol>
    <p><font size="2">You are now at the desired directory and you can view NDS file
    information. <br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="net001_10"></a><font size="3"><strong>Miscellaneous Tips</strong></font></p>
    <p><font size="2">Don&#146;t panic and start deleting and reinstalling Directory Services.
    </font></p>
    <p><font size="2">Make sure the Directory is stable before you make changes in the
    Directory structure. Don&#146;t split or join a partition that you suspect is experiencing
    a problem. </font></p>
    <p><font size="2">Ascertain whether the problem is related to the server or to the client
    software. Check to see that the NET.CFG file specifies the correct context and the correct
    preferred tree. If the problem is isolated to a single client, it probably isn&#146;t an
    NDS or server problem. Working with the server to resolve a client problem will only cause
    frustration at best. At worst, it could lead to other NDS-related problems. </font></p>
    <p><font size="2">Keep a record of your diagnosis and the actions taken to correct
    Directory problems. <br>
    <br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    
    <p>&nbsp;</p>
    <p align="center"><img width="486" height="25" src="../../../images/connectd.gif"
    alt="Computing for a Connected World"> </td>
  </tr>
</table>
</body>
</html>
