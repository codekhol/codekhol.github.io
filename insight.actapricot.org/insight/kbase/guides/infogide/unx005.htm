<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<title>Info Guide UNX005</title>
<style type="text/css"><!--
	body { font-family: Arial, Helvetica, sans-serif; }

//-->
</style>
<meta name="generator" content="Microsoft FrontPage 3.0">
</head>

<body background="../../../images/mits-bg5.gif" bgcolor="#ffffff" link="#d60029"
alink="#d60029" vlink="#800080" leftmargin="0" marginwidth="0" marginheight="6">
<!-- Header - start of top table -->
<table border="0" cellpadding="0" cellspacing="0" width="98%">
<!-- The top table has the Mitsubishi logo and Home button -->
  <tr>
    <td valign="top"><img src="../../../images/m-logo-s.gif" width="193" height="70" alt="Mitsubishi Electric - Computing for a Connected World"></td>
        <td valign="bottom" align="right"><a href="../../../default.htm"><img width="41" height="32" src="../../../images/bt-home.gif" alt="Insight CD Home Page" border="0"></a></td>
  </tr>
  <tr>
    <td width="98%" colspan="2" bgcolor="#000000"><img width="1" height="1" src="../../../images/space.gif"><br>
    </td>
  </tr>
</table>
<!-- end of top table -->


<table border="0" cellpadding="0" cellspacing="0" width="98%">
  <tr>
    <td width="10" bgcolor="#000000"><img width="10" height="10"
    src="../../../images/space.gif"></td>
    <td width="120" valign="top" align="left" bgcolor="#000000"><script LANGUAGE="JavaScript">

<!--

        if (document.images) {

          var product1 = new Image()
          product1.src = "/insight/images/product1.gif"
          var product2 = new Image()
          product2.src = "/insight/images/product2.gif"

          var service1 = new Image()
          service1.src = "/insight/images/service1.gif"
          var service2 = new Image()
          service2.src = "/insight/images/service2.gif"

          var kbase1 = new Image()
          kbase1.src = "/insight/images/kbase1.gif"
          var kbase2 = new Image()
          kbase2.src = "/insight/images/kbase2.gif"       

          var upgrade1 = new Image()
          upgrade1.src = "/insight/images/upgrade1.gif"
          var upgrade2 = new Image()
          upgrade2.src = "/insight/images/upgrade2.gif"       

          var downlo1 = new Image()
          downlo1.src = "/insight/images/downlo1.gif"
          var downlo2 = new Image()
          downlo2.src = "/insight/images/downlo2.gif"       

          var inserv1 = new Image()
          inserv1.src = "/insight/images/inserv1.gif"
          var inserv2 = new Image()
          inserv2.src = "/insight/images/inserv2.gif"       

          var email1 = new Image()
          email1.src = "/insight/images/email1.gif"
          var email2 = new Image()
          email2.src = "/insight/images/email2.gif"       

          var search1 = new Image()
          search1.src = "/insight/images/search1.gif"
          var search2 = new Image()
          search2.src = "/insight/images/search2.gif"       

          var y20001 = new Image()
          y20001.src = "/insight/images/y2001.gif"
          var y20002 = new Image()
          y20002.src = "/insight/images/y2002.gif"

          var osites1 = new Image()
          osites1.src = "/insight/images/osites1.gif"
          var osites2 = new Image()
          osites2.src = "/insight/images/osites2.gif"

          var disclaim1 = new Image()
          disclaim1.src = "/insight/images/disclam1.gif"
          var disclaim2 = new Image()
          disclaim2.src = "/insight/images/disclam2.gif"

        }



        function act(imgName) {
          if (document.images)
            document[imgName].src = eval(imgName + '2.src')
        }



        function inact(imgName) {
          if (document.images)
            document[imgName].src = eval(imgName + '1.src')
        }

        // -->
</script>


    <a HREF="../../../products/main.htm" onMouseOver="act('product')" onMouseOut="inact('product')"><img width="113" height="22" src="../../../images/product1.gif" name="product" alt="Products" border="0"></a><br>

    <a HREF="../../../services/main.htm" onMouseOver="act('service')" onMouseOut="inact('service')"><img width="113" height="22" src="../../../images/service1.gif" name="service" alt="Services" border="0"></a><br>

    <a HREF="../../main.htm"><img width="113" height="22" src="../../../images/kbase2.gif" name="kbase" alt="Knowledgebase" border="0"></a><br>
       <a HREF="../../ipb/ipbmain.htm"><img width="113" height="17" src="../../../images/s_ipb.gif" alt="Bulletins (IPBs)" border="0"></a><br>
       <a HREF="../guidecon.htm"><img width="113" height="17" src="../../../images/s_guides.gif" alt="Guides" border="0"></a><br>
       <a HREF="../../faq/main.htm"><img width="113" height="17" src="../../../images/s_faq.gif" alt="FAQs" border="0"></a><br>
       <a HREF="../manuals/menu.htm"><img width="113" height="17" src="../../../images/s_manual.gif" alt="Owner's Handbooks" border="0"></a><br>
       <a HREF="../../../common/infact/menu.htm"><img width="113" height="17" src="../../../images/s_datash.gif" alt="Product Datasheets" border="0"></a><br>
       <a HREF="../../../common/misc/menu.htm"><img width="113" height="17" src="../../../images/s_misc.gif" alt="Miscellaneous Items" border="0"></a><br>

    <a HREF="../../../upgrades/main.htm" onMouseOver="act('upgrade')" onMouseOut="inact('upgrade')"><img width="113" height="22" src="../../../images/upgrade1.gif" name="upgrade" alt="Upgrades" border="0"></a><br>

    <a HREF="../../../download/main.htm" onMouseOver="act('downlo')" onMouseOut="inact('downlo')"><img width="113" height="22" src="../../../images/downlo1.gif" name="downlo" alt="Downloads" border="0"></a><br>

    <a HREF="../../../insindex.exe" onMouseOver="act('search')" onMouseOut="inact('search')"><img width="113" height="22" src="../../../images/search1.gif" name="search" alt="Search Insight" border="0"></a><br>
    <a HREF="mailto:insight@mitsubishi-computers.com" onMouseOver="act('email')" onMouseOut="inact('email')"><img width="113" height="22" src="../../../images/email1.gif" name="email" alt="E-Mail us" border="0"></a><br>
    <a HREF="http://www.mitsubishi-computers.com/support/service/" onMouseOver="act('inserv')" onMouseOut="inact('inserv')"><img width="113" height="22" src="../../../images/inserv1.gif" name="inserv" alt="Insight Service" border="0"></a><br>

    <a HREF="../../../common/year2000/year2000.htm" onMouseOver="act('y2000')" onMouseOut="inact('y2000')"><img width="113" height="21" src="../../../images/y2001.gif" name="y2000" alt="Year 2000" border="0"></a><br>
    <a HREF="../../../common/oth-site/oth-site.htm" onMouseOver="act('osites')" onMouseOut="inact('osites')"><img width="113" height="38" src="../../../images/osites1.gif" name="osites" alt="Other Mitsubishi Sites" border="0"></a><br>
    <a HREF="../../../common/disclaim.htm" onMouseOver="act('disclaim')" onMouseOut="inact('disclaim')"><img width="113" height="24" src="../../../images/disclam1.gif" name="disclaim" alt="Site Disclaimer" border="0"></a><br>
      
    <img width="113" height="120" src="../../../images/space.gif"><br>
</td>
    <td width="10" valign="top" width="10" height="10" src="/insight/images/space.gif"
    alt="10 pixel Gap" border="0"></td>

    <td valign="top"><font size="2"><br>
    </font><font face="Arial,Helvetica" size="4" color="#D60029"><strong>Info Guide UNX005:<br>
    SCO Unix 3.2v4.2 / OpenServer 5 with DPT 3224 RAID controller</strong></font><p><font
    size="2">Whilst this guide was initially written detailing the FT//ex 1000 system, much of
    it is relevant for the Shogun system. </font></p>
    <p><font size="2">Throughout this Info Guide the following typefaces have special meaning:</font></p>
    <table border="0" cellspacing="0" cellpadding="3">
      <tr>
        <td><font size="2"><strong><font face="Courier New">dptmgr</font></strong> </font></td>
        <td><font size="2">-</font></td>
        <td><font size="2">The name of a command, file, menu item, or on-screen option.</font></td>
      </tr>
      <tr>
        <td><font size="2"><font face="Courier New">Boot</font> </font></td>
        <td><font size="2">-</font></td>
        <td><font size="2">Output displayed on screen.</font></td>
      </tr>
      <tr>
        <td><u><font size="2" face="Courier New">arad dptr</font></u></td>
        <td><font size="2">-</font></td>
        <td><font size="2">Keyboard input</font></td>
      </tr>
      <tr>
        <td valign="top"><em><font size="2">Logical Storage Unit</font></em></td>
        <td valign="top"><font size="2">-</font></td>
        <td valign="top"><font size="2">Terminology used by DPT and is described in the DPT
        SmartRAID User's Manual</font></td>
      </tr>
    </table>
    <p><font size="2">This Info Guide makes the following assumptions: </font><ul>
      <li><font size="2">That the DPT card and the hot-plug backplane have been installed in the
        FT//ex. For guidance with these tasks review the installation documentation supplied with
        them. <br>
        <br>
        </font></li>
      <li><font size="2">That a single array of drives configured as a RAID 5 array is to be
        installed. This type of array provides drive redundancy without the need for duplicating
        the entire array of drives with a mirrored array, and provides a disk performance increase
        through striping. RAID 5 requires at least 3 drives. Assuming all drives are of the same
        size, an amount of storage capacity equal to that of one drive in the array is lost, it
        being used throughout the array to hold parity information for rebuilding data should a
        drive fail. So, for an array of 5 drives each of 1Gb, the size of the logical drive that
        the DPT card offers the host is 4Gb. <br>
        <br>
        </font></li>
      <li><font size="2">That SCO Unix 3.2v4.2 or OpenServer 5 is to be installed from a SCSI tape
        set to ID 2, or a CD-ROM set to ID 5, connected to the on-board AIC-7870. There are
        potential problems with using the 7870 for installation and these will be discussed and an
        alternative offered. These SCSI ID&#146;s are mandatory for installation, this being an
        SCO feature. </font></li>
    </ul>
    <p><font size="2">Only Apricot supported drives for the FT//ex with DPT card should be
    used. At the time of writing such drives being the Quantum 540Mb, IBM DPES-31080 1Gb
    &#147;Pegasus&#148;, and IBM 2Gb &#147;Starfire&#148;. For earlier Apricot supplied drives
    check with Unix Support. </font></p>
    <p><font size="2">This guide still has relevance for a Shogun installation, but for
    additional Shogun specific information refer to the &#147;Shogun Facts Tips &amp; Tricks
    Engineering Document&#148; available on <strong>Insight</strong> from release 10 and from
    area 44 of Apricot <strong>Insight BBS</strong> as the file <strong>SHOGFTT.ZIP</strong>. </font></p>
    <p><font size="2">Follow these notes in the order written to start from an unconfigured
    system through to SCO Unix/OpenServer 5 installed onto a RAID 5 drive array.</font></p>
    <blockquote>
      <p><font size="2"><a href="#unx005_1">FT//ex 1000 RAID system configuration</a><br>
      <a href="#unx005_2">Installing SCO Unix</a><br>
      <a href="#unx005_3">Installing SCO OpenServer 5</a><br>
      <a href="#unx005_4">DPT utilities</a><br>
      <a href="#unx005_5">Emergency floppies</a> </font></p>
    </blockquote>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p><font size="2">(Release 3.02 - 22nd July 1996) <br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx005_1"></a><font size="3"><strong>FT//ex 1000 RAID system configuration</strong></font></p>
    <p><font size="2">Prior to configuring the RAID array or installing software onto any hard
    disks, the system&#146;s configuration must be checked as outlined in the following
    sub-sections. </font></p>
    <p><font size="2">There are four separate software/BIOS setups to be run, these are: </font><ul>
      <li><font size="2">The motherboard &#147;BIOS Utility&#148;<br>
        <br>
        </font></li>
      <li><font size="2">The DPT card &#147;DPT Configuration Utility&#148;<br>
        <br>
        </font></li>
      <li><font size="2">The Adaptec AIC-7870 on-board PCI SCSI controller &#147;SCSISelect(TM)
        Utilty&#148;<br>
        <br>
        </font></li>
      <li><font size="2">The &#147;EISA System Configuration Utility&#148; or ECU. </font></li>
    </ul>
    <p><font size="2">These quoted names are the names of these setup utilities as they appear
    on-screen. </font></p>
    <p><strong><font size="2">Hold F10 to make system boot</font></strong></p>
    <p><font size="2">At boot-up the system should display output from the DPT BIOS and the
    Adaptec AIC 7870 BIOS. If either are missing or if the system does not boot DOS from one
    of the hard disks (systems are supplied with DOS installed from our factory), assume that
    there is a problem with stored CMOS configuration and power on again with the F10 key held
    down until the system beeps once. </font></p>
    <p><font size="2">This will reset the CMOS configuration to a working state that will
    allow the floppy to boot and the ECU to be run. Pressing F10 in this way does not affect
    the ECU settings that are in place. See the later sub-section entitled &#147;ECU
    settings&#148; for the settings required. </font></p>
    <p><font size="2">After configuring the ECU you must configure the settings in the
    motherboard &#147;BIOS Utility&#148;, the DPT card &#147;DPT Configuration Utility&#148;,
    and the Adaptec AIC-7870 on-board PCI SCSI controller &#147;SCSISelect(TM) Utilty&#148;.
    These settings, and the ECU settings, that should be defined are detailed in the following
    sub-sections. </font></p>
    <p><strong><font size="2">ECU settings</font></strong></p>
    <p><font size="2">Firstly review the ECU settings. After the ECU has booted select the <strong><font
    face="Courier New">Configure computer - advanced method</font></strong> option. At this
    point the EISA slots 1 to 5 are listed and so is the system motherboard. Select the
    motherboard - the menu option <strong><font face="Courier New">M5</font></strong>. </font></p>
    <p><font size="2">Shown below is the ECU listing for the motherboard with comments
    included to give relevant explanations: </font></p>
    <pre><font size="1">System Memory Functions
 Base System Memory............640K Base Memory
 4   -   16MB Extended Memory..16MB Ext Memory with 15-16MB System used</font></pre>
    <p><font size="2">For systems with at least 16MB the above is set to 16MB. </font></p>
    <pre><font size="1"> 16  -   64MB Extended Memory  Ctrl-R to add the Memory</font></pre>
    <p><font size="2">For memory up from 16Mb to 64Mb enter &lt;cntrl&gt;R followed by
    &lt;tab&gt; and then enter the value of the memory in megabytes (as a number followed by
    M) above 16Mb. Eg. for a 32Mb system, enter 16M. </font></p>
    <pre><font size="1"> 64  -  128MB Extended Memory &lt;cntrl&gt;R to add the Memory</font></pre>
    <p><font size="2">For memory up from 64Mb to 128Mb enter &lt;cntrl&gt;R followed by
    &lt;tab&gt; and then enter the value of the memory in megabytes (as a number followed by
    M) above 64Mb. Eg. for a 96Mb system, enter 32M here and 48M in the 16 - 64MB Extended
    Memory menu item. </font></p>
    <pre><font size="1">PCI Devices IRQ assignment
 On board 7870 SCSI controller.......IRQ 11</font></pre>
    <p><font size="2">The actual mapping of the Adaptec 7870 PCI interrupt to IRQ mapping is
    setup in the motherboard &#147;BIOS Utility&#148;. Therefore, although the above setting
    for the 7870 SCSI controller can be set to disabled, it should be set as IRQ 11 here to
    stop the ECU assigning this IRQ to another card. </font></p>
    <pre><font size="1"> On board Enhanced IDE controller....Disabled
 PCI slot 1..........................IRQ 14</font></pre>
    <p><font size="2">The actual mapping of the DPT 3224 card&#146;s PCI interrupt to IRQ
    mapping is setup in the motherboard &#147;BIOS Utility&#148;. Therefore, although the
    above setting for the PCI slot 1 can be set to disabled, it should be set as IRQ 14 here
    to stop the ECU assigning this IRQ to another card. </font></p>
    <pre><font size="1"> PCI slot 2..........................Disabled
 PCI slot 3..........................Disabled
 
Sysem BIOS type......................E, F Segment System used
 
Peripheral Device Status
 Mouse port..........................Enabled
 Keyboard port.......................Enabled
 Floppy Disk Controller..............Enabled
 IDE HDD Interface...................Disabled
 Parallel port.......................Enabled as LPT1 (3BCh)
 Serial port 1 (9 pins)..............Enabled as Serial 1 (3F8h)
 Serial port 1 (25 pins).............Enabled as Serial 2 (2F8h)
 
System Setting
 Special System Ports................Enable
 EISA Reserved Devices...............Enable</font></pre>
    <p><font size="2">To save the ECU definitions, enter &lt;alt&gt; to highlight the top row
    of menu items. Open the System menu by pressing the &lt;down arrow&gt;. Select <strong><font
    face="Courier New">Exit</font></strong> and then select <strong><font face="Courier New">Save
    configuration and exit</font></strong> at the next menu. </font></p>
    <p><strong><font size="2">The motherboard BIOS Utility</font></strong></p>
    <p><font size="2">After defining the ECU settings as shown in the previous sub-section
    reboot the system and wait for the memory test to run. Next you will either see the DPT
    BIOS run followed by the Adaptec AIC 7870 BIOS or you may not see either of these which
    probably means that F10 was pressed to force the system to boot the ECU floppy. You are
    then presented with a blue configuration display in the top third of the screen. </font></p>
    <p align="center"><font size="2">Once whichever of the above occurs after the memory
    tests, enter &lt;cntrl&gt;&lt;alt&gt;&lt;esc&gt; to run the motherboard BIOS Utility. This
    will give the following menu: </font></p>
    <div align="center"><center><pre><font size="1">Basic System Configuration
Advanced System Configuration
PCI System Configuration
System Security
Load Setup Default Settings</font><font
size="2">
</font></pre>
    </center></div><p><em><strong><font size="2">Basic System Configuration</font></strong></em></p>
    <p><font size="2">Select <strong><font face="Courier New">Basic System Configuration</font></strong>
    and review the following definitions: </font></p>
    <pre><font size="1">Date----------------------------- [DD/MM/MM]
Time----------------------------- [hh:mm:ss]
Diskette Drive A ---------------- [1.44 MB 3.5-inch]
Diskette Drive B ---------------- [      None      ]
                                            Cylinder  Head  Sector
Fixed Disk 0 (   0 MB) ---------- [Auto]           0    0       0
Fixed Disk 1 (   0 MB) ---------- [Auto]           0    0       0
 
 
Base Memory --------------------- [   640] KB
Extended Memory ----------------- [ 31744] KB   This for a 32Mb system
Total memory -------------------- [ 32384] KB
Math Coprocessor ---------------- [  Installed  ]
Video Display ------------------- [VGA/EGA]</font></pre>
    <p><font size="2">Enter &lt;pg down&gt; to review page 2 of 2 </font></p>
    <pre><font size="1">Communication Settings
 
    Baud Rate ------------------- [ 9600] BPS
    Parity ---------------------- [ Odd]
    Stop Bits ------------------- [1] Bits
    Data Length ----------------- [8] Bits
 
Enhanced IDE Features
    IDE Fixed Disk Block Mode --- [Disabled]
    Large Hard Disk Capacity ---- [Disabled]
    Advanced PIO Mode  ---------- [Disabled]

Num Lock After Boot ------------- [Enabled]
Memory Test --------------------- [Disabled]</font></pre>
    <p><font size="2">The <strong><font face="Courier New">Memory Test</font></strong> (memory
    count and test at power-up) option above can only be enabled if the <strong><font
    face="Courier New">Fast Boot Mode</font></strong> option below is disabled </font></p>
    <pre><font size="2">Auto Configuration Mode --------- [Enabled]
 </font></pre>
    <p><font size="2">The <strong><font face="Courier New">Auto Configuration Mode</font></strong>
    option above is normally enabled. If disabled it is possible to disable the processor
    cache in the <strong><font face="Courier New">Advanced System Configuration</font></strong>
    menu. </font></p>
    <pre><font size="1">Fast Boot Mode ------------------ [Enabled]</font></pre>
    <p><em><strong><font size="2">Advanced System Configuration</font></strong></em></p>
    <p><font size="2">Select <strong><font face="Courier New">Advanced System Configuration</font></strong>
    and review the following definitions: </font></p>
    <pre><font size="1">Shadow RAM
    E0000h-FFFFFh (System BIOS) ------------- [Enabled ]
    C0000h-C7FFFh (Video BIOS) -------------- [Enabled ]
    C8000h-CFFFFh --------------------------- [Disabled]
    D0000h-D7FFFh --------------------------- [Disabled]
    D8000h-DFFFFh --------------------------- [Disabled]
 
Internal Cache(CPU Cache) ------------------- [Enabled ]
External Cache ------------------------------ [Enabled ]
    Cache Scheme ---------------------------- [Write Back]</font></pre>
    <p><font size="2">If it is ever required to disable the processor cache the <strong><font
    face="Courier New">Auto Configuration Mode</font></strong> option in the <strong><font
    face="Courier New">Basic System Configuration</font></strong> menu must be disabled. </font></p>
    <pre><font size="1">System Memory Parity ------------------------ [Disabled]
Memory at 15MB-16MB Reserved for ------------ [  System  ] Use
E0000h-FFFFFh (System BIOS) ----------------- [Noncacheable]
C0000h-C7FFFh (Video BIOS) ------------------ [Noncacheable]</font></pre>
    <p><font size="2">Enter &lt;pg down&gt; to review page 2 of 2 </font></p>
    <pre><font size="1">Guaranteed Access Time Mode ----------------- [Enabled ]
Highest Priority Device for PCI Arbitration - [EISA/IO]</font></pre>
    <p><em><strong><font size="2">PCI System Configuration</font></strong></em></p>
    <p><font size="2">Select <strong><font face="Courier New">PCI System Configuration</font></strong>
    and review the following definitions: </font></p>
    <pre><font size="1">PCI Slot Number ------------------------------ [1]
   Function Number Of Device ----------------- [0]
      Device Function ------------------------ [Enabled ]
      Bus Master ----------------------------- [Enabled ]
 
   IRQ Level for INTA Pin -------------------- [14]
   IRQ Level for INTB Pin -------------------- [--]
   IRQ Level for INTB Pin -------------------- [--]
   IRQ Level for INTB Pin -------------------- [--]</font></pre>
    <p><em><strong><font size="2">System Security</font></strong></em></p>
    <p><font size="2">Select <strong><font face="Courier New">System Security</font></strong>
    and review the following definitions. </font></p>
    <pre><font size="1">Disk Drive Control
    Diskette Drive --------------- [       Normal       ]
    Fixed Disk Drive ------------- [       Normal       ]
    System Boot Drive ------------ [Drive A Then C]
 
On Board Communication Ports
    Serial Port 1 Base Address --- [  3F8h  ]
    Serial Port 2 Base Address --- [  2F8h  ]
    Parallel Port Base Address --- [  3BCh  ]</font></pre>
    <p><font size="2">If the parallel port is required, the <strong><font face="Courier New">mkdev
    parallel</font></strong> command is used and the <strong><font face="Courier New">Parallel/Monochrome</font></strong>
    adapter option is normally selected. The SCO default I/O address being 3BCh. Use the left
    and right arrow keys to change the hardware default from 378h to 3BCh. </font></p>
    <pre><font size="1">      Operation Mode  ------- [ Standard Parallel Port(SPP) ] Mode
      EPP Version Selection - [1.7]
 
Setup Password -------------- [ None  ]
Power On Password ----------- [ None  ]</font></pre>
    <p><strong><font size="2">Initial DPT BIOS screen</font></strong></p>
    <p><font size="2">The DPT 3224 card BIOS gives the following type of display for a new
    system where the drives attached are not configured as a RAID array. In the example below
    the card has five IBM &#147;Pegasus&#148; DPES-31080 1Gb drives attached and they are set
    to SCSI ID&#146;s 0,1,2,3,4 respectively </font></p>
    <pre><font size="1">   DPT SCSI BIOS v003.B1
   Distributed Processing Technology
   (c) Copyright 1990-1994
 
   &lt;Ctrl-D&gt;  for DPT Configuration Utility
 
Controller: PM3224A/9X -R  v07A.6  4.0MB Port:0510h  IRQ:14
   Drive  :  0 (0,0,0)    IBM     DPES-31080        517 x  65 x 63
   Drive  :  1 (0,1,0)    IBM     DPES-31080        517 x  65 x 63
   Drive  :  2 (0,2,0)    IBM     DPES-31080        517 x  65 x 63
   Drive  :  3 (0,3,0)    IBM     DPES-31080        517 x  65 x 63
   Drive  :  4 (0,4,0)    IBM     DPES-31080        517 x  65 x 63</font></pre>
    <p><font size="2">Note the line DPT SCSI BIOS v003.B1 which shows the card&#146;s firmware
    version. The DPT card MUST NOT have version 3B0 firmware installed as this is known to
    corrupt vital DPT specific data on any of the attached hard disk drives. Version 3B1 (full
    version name is actually 7A63B1) is the first satisfactory version to be used. Contact
    Apricot Technical Support for the latest version as it is likely that another release will
    be preferred in the future. </font></p>
    <p><font size="2">The line above starting Controller: indicates that the card has a single
    4Mb cache simm installed and that its PCI interrupt A line is mapped to the
    computer&#146;s IRQ 14 line. If the IRQ is incorrect it should be set correctly in the
    computer&#146;s BIOS setup (&lt;cntrl&gt;&lt;alt&gt;&lt;esacpe&gt; during boot-up) - this
    setup is described elsewhere in these notes. The I/O port of 510h is also identified -
    this is dependent upon the PCI slot used and cannot be changed, 510h indicates PCI slot 1.
    </font></p>
    <p><strong><font size="2">DPT BIOS screen with RAID array configured</font></strong></p>
    <p><font size="2">Once the drive array is configured with the DPT Manager utility (<strong><font
    face="Courier New">dptmgr.exe</font></strong>) the five lines will be replaced with a
    single line that identifies the drive array as a single logical drive as shown below: </font></p>
    <pre><font size="1">Controller: PM3224A/9X -R  v07A.6  4.0MB Port:0510h  IRQ:14
   Drive  :  0 (0,0,0)    DPT     RAID-5            527 x 255 x 63</font></pre>
    <p><strong><font size="2">Label drive trays</font></strong></p>
    <p><font size="2">Label the drive trays that are fitted with hard disks with their SCSI
    ID. This will allow location of a drive when action is required in response to messages
    from the DPT firmware/BIOS or the DPT software utilities <br>
    <br>
    <a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top" align="left" border="0"
    hspace="0" width="14" height="10"></a> <a href="#top"><img src="../../../graphics/redarr01.gif"
    alt="Back to Top" align="right" border="0" hspace="0" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx005_2"></a><font size="3"><strong>Installing SCO Unix</strong></font></p>
    <p><strong><font size="2">Required BTLD floppies</font></strong></p>
    <p><font size="2">In addition to the SCO distribution floppies and tape, BTLD driver disks
    are required for the on-board Adaptec AIC-7870 and the DPT3224. </font></p>
    <p><font size="2">However, do not use the BTLD driver disk for the AIC-7870 that ships in
    the FT//ex box as a modified BTLD driver is required that allows installation from a SCSI
    tape or CD-ROM connected to the Adaptec onto a SCSI disk connected to another SCSI
    adapter. This is because under SCO Unix 3.2v4.2 the installation SCSI device must be on
    the same SCSI bus as the root hard disk. Once Unix is installed however, such limitations
    do not exist - Unix will support the DPT disks and AIC-7870 SCSI devices. </font></p>
    <p><font size="2">The modified AIC-7870 BTLD floppy image is available from area39 of
    Apricot <strong>Insight BBS</strong> or from release 8 of the <strong>Insight CD</strong>.
    The filename is <strong><font face="Courier New">dpt7870.Z</font></strong>. </font></p>
    <p><font size="2">The DPT card&#146;s BTLD floppy is created by the DOS based <strong><font
    face="Courier New">dptmgr.exe</font></strong> utility used to create the drive array.
    Refer to the notes covering the use of this utility supplied during the Apricot RAID
    training day or the <em>Initial Syatem Configuration</em> section of the DPT SmartRAID
    User&#146;s Manual for a full description of the creation of such operating system
    specific floppies. This <em>DPT OS Setup diskette</em> as DPT call it, is created by
    performing an Initial System Configuration. An image of this floppy is also on <strong>Insight</strong>
    from release 10 and in area 39 of Apricot <strong>Insight BBS</strong> as the file <strong><font
    face="Courier New">DPTBTLD.Z</font></strong>. </font></p>
    <p><font size="2"><em><strong>Installing</strong></em><br>
    Boot from the SCO N1 floppy as normal and at the Boot: prompt enter:</font></p>
    <pre><font size="2">     <u><font face="Courier New">link restart Stp=alad(0,2,0) disable=dpt</font></u></font></pre>
    <p><font size="2">This will force an installation from a SCSI tape connected to the
    AIC-7870. For a CD-ROM installation use the following boot string: </font></p>
    <pre><font size="2">     <u><font face="Courier New">link restart Srom=alad(0,5,0) disable=dpt</font></u> </font></pre>
    <p><font size="2">The boot string causes the SCO supplied dpt driver not to be used as
    this driver is for earlier DPT cards and is not suitable for the 3224 SmartCache card. </font></p>
    <p><font size="2">Enter the following when asked what drivers are to be linked in for
    version 1EB or later of the DPT Manager: </font></p>
    <pre><font size="2">     <u><font face="Courier New">dptr4 alad</font></u> </font></pre>
    <p><font size="2">For version 1E9 of the DPT Manager enter:</font></p>
    <pre><font size="2">     <u><font face="Courier New">dptraid alad</font></u></font></pre>
    <p><font size="2">Continue with a normal installation. You will be asked to insert the
    volumes that contain these drivers on two separate occasions during the installation. </font></p>
    <p><font size="2">The installation will default to a SCSI tape on ID 2 connected to the
    AIC-7870 (alad driver). If a CD-ROM is being used the installation will say that the
    CD-ROM is to be on SCSI ID 5, as mentioned in the Introduction section. </font></p>
    <p><font size="2">Once SCO Unix is installed check the <strong><font face="Courier New">/etc/conf/cf.d/mscsi</font></strong>
    file for a SCSI tape entry. If not present re-create the SCSI tape with the <strong><font
    face="Courier New">mkdev tape</font></strong> command in the normal manner.</font></p>
    <p><font size="2"><a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top"
    align="left" border="0" hspace="0" width="14" height="10"></a> <a href="#top"><img
    src="../../../graphics/redarr01.gif" alt="Back to Top" align="right" border="0" hspace="0"
    width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx005_3"></a><font size="3"><strong>Installing SCO OpenServer 5</strong></font></p>
    <p><font size="2">The procedure above for Unix 3.2v4.2 is not appropriate for OpenServer
    5. However, it should be referred to and the differences here noted. </font></p>
    <p><font size="2">The DPT Storage Manager software must be at least release 1EB - earlier
    releases have no support for OpenServer 5. </font></p>
    <p><strong><font size="2">Required BTLD floppy</font></strong></p>
    <p><font size="2">The DPT card&#146;s BTLD floppy is created by the DOS based <strong><font
    face="Courier New">dptmgr.exe</font></strong> utility used to create the drive array. An
    image of this floppy is also on <strong>Insight</strong> from release 10 and in area 39 of
    Apricot <strong>Insight BBS</strong> as the file <strong><font face="Courier New">DPTBTLD.Z</font></strong>.
    For an OpenServer 5 installation, release 1EB or later DPT Manager is required. The menu
    to create an <em>SCO DPT OS Setup diskette</em> floppy does not actually list OpenServer 5
    as an option with version 1EB, but selecting the SCO Unix 3.2v4.2 option will create a
    BTLD floppy that contains the OpenServer 5 driver. </font></p>
    <p><font size="2"><em><strong>Installing</strong></em> <br>
    Boot from the SCO Boot floppy as normal and at the Boot: prompt enter: </font></p>
    <pre><font size="2">     <u><font face="Courier New">defbootstr ahslink=dptr5 Stp=alad(0,2,0) disable=dpt</font></u></font></pre>
    <p><font size="2">This will force an installation from a SCSI tape connected to the
    AIC-7870. For a CD-ROM installation use the following boot string: </font></p>
    <pre><font size="2">     <u><font face="Courier New">defbootstr ahslink=dptr5 Srom=alad(0,5,0) disable=dpt</font></u></font></pre>
    <p><font size="2">The boot string causes the SCO supplied dpt driver not to be used as
    this driver is for earlier DPT cards and is not suitable for the 3224 SmartCache card. </font></p>
    <p><font size="2">Note that the alad driver exists in the standard OpenServer 5 product.</font></p>
    <p><font size="2"><a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top"
    align="left" border="0" hspace="0" width="14" height="10"></a> <a href="#top"><img
    src="../../../graphics/redarr01.gif" alt="Back to Top" align="right" border="0" hspace="0"
    width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx005_4"></a><font size="3"><strong>DPT utilities</strong></font></p>
    <p><font size="2">From release 1E7 of the DOS based Storage Manager utility <strong><font
    face="Courier New">dptmgr.exe</font></strong> the <em>DPT OS Setup diskette</em> that is
    created contains the BTLD driver plus a Unix version of the Storage Manager and an event
    logger/broadcaster. From version 1EB there is also support for OpenServer 5. </font></p>
    <p><strong><font size="2">Installation of the utilities</font></strong></p>
    <p><font size="2"><em><strong>Installation at Unix install time</strong></em><br>
    If the system is installed with a BTLD floppy of at least release 1E7 the utilities will
    be placed into the <strong><font face="Courier New">/usr/dpt</font></strong> directory.
    One other file will also be installed, this being the rc startup script <strong><font
    face="Courier New">/etc/rc2.d/S33dpt</font></strong>. </font></p>
    <p align="left"><font size="2">The files in <strong><font face="Courier New">/usr/dpt</font></strong>
    are as follows: </font></p>
    <div align="center"><center><table border="0" cellspacing="0" cellpadding="3" width="550">
      <tr>
        <td width="33%"><font size="2">S33dpt </font></td>
        <td width="34%"><font size="2">dptlog </font></td>
        <td width="33%"><font size="2">dptmgrsc.rsc</font></td>
      </tr>
      <tr>
        <td><font size="2">dptelog </font></td>
        <td><font size="2">dptmgr </font></td>
        <td><font size="2">dptsig</font></td>
      </tr>
      <tr>
        <td><font size="2">dptelog.20 </font></td>
        <td><font size="2">dptmgrsc </font></td>
        <td><font size="2">read.me</font></td>
      </tr>
      <tr>
        <td><font size="2">dptelog.def </font></td>
        <td><font size="2">dptmgrsc.hlp </font></td>
        <td><font size="2">readme.apps</font></td>
      </tr>
      <tr>
        <td><font size="2">dpteng </font></td>
        <td><font size="2">dptmgrsc.ini </font></td>
        <td><font size="2">zilmouse.sco</font></td>
      </tr>
    </table>
    </center></div><p><font size="2">Of particular interest is the file <strong><font
    face="Courier New">readme.apps</font></strong> which provides usage and configuration
    information. </font></p>
    <p><font size="2">The file <strong><font face="Courier New">dptelog.def</font></strong>
    configures the error logger utility <strong><font face="Courier New">dptelog</font></strong>.
    It is strongly suggested that this file be amended to enable such features as emailing of
    failures. See the sub-section entitled &#147;Suggested modifications&#148; below for more
    detail. </font></p>
    <p><font size="2"><em><strong>Installation onto a running system</strong></em><br>
    If updating to a later release of the DPT driver, perhaps from the 1E3 release that did
    not include a Unix based manager and utility set, use the <strong><font face="Courier New">installpkg</font></strong>
    command in the normal way. </font></p>
    <p><font size="2"><em><strong>Suggested modifications</strong></em><br>
    The file <strong><font face="Courier New">dptelog.def</font></strong> configures the error
    logging program <strong><font face="Courier New">dptelog</font></strong>. Given below are
    some entries which may be desirable. Refer to the file <strong><font face="Courier New">readme.apps</font></strong>
    for a full description. </font></p>
    <pre><font size="1"># TIME is the minutes between checks 
TIME=1</font></pre>
    <p><font size="2">The DPT default for the above setting is that the card is checked for
    possible problems every minute. A longer time could be specified here if desired. The
    default should be satisfactory. </font></p>
    <pre><font size="1"># SYSLOG= allows you to enable/disable logging the ascii events to a file
SYSLOG:/usr/adm/messages</font></pre>
    <p><font size="2">The above setting defines that errors are logged to the <strong><font
    face="Courier New">/usr/adm/messages</font></strong> file. This should not be changed. </font></p>
    <pre><font size="1"># ELOG allows you to enable/disable logging to the binary adapter event file
ELOG=ON</font></pre>
    <pre><font size="1"># NOTIFY allows you to specify users to be notified
NOTIFY=root</font></pre>
    <p><font size="2">The DPT default for the above setting is no users defined - commented
    out. </font></p>
    <pre><font size="1"># NOTIFY=D: allows you to specify a device to be notified to
NOTIFY=D:/dev/console</font></pre>
    <pre><font size="1"># MAIL will email the events to any currently set up users
MAIL</font></pre>
    <p><font size="2">The DPT default for the above setting is no mail - commented out. </font></p>
    <pre><font size="1"># NOCLEAR will not clear the adapter data so each scan will get the same data
#NOCLEAR</font></pre>
    <pre><font size="1"># NOWAIT will scan the system once and exit
#NOWAIT</font></pre>
    <p><strong><font size="2">Using the utilities</font></strong></p>
    <p><font size="2">The only utility that should be needed from the command line is the Unix
    version of the Storage Manager. This command is <strong><font face="Courier New">/usr/dpt/dptmgr</font></strong>.
    It can support the use of a mouse and if this is required use the Unix <strong><font
    face="Courier New">mkdev mouse</font></strong> utility to configure a mouse. However, it
    is quite usable without a mouse and works in a similar manner to the DOS Storage Manager <strong><font
    face="Courier New">dptmgr.exe</font></strong>. This command is actually a script that uses
    <strong><font face="Courier New">/usr/dpt/usemouse</font></strong> to establish if a mouse
    is attached, and then runs one of two manager binaries dependent upon whether there is a
    mouse or not. There is a slight difference to the DOS version however; the &lt;alt&gt; key
    is not used with other keys as a short-cut to an option. Instead the same character is
    preceded with an &lt;escape&gt;, so to Switch View for example use the key sequence
    &lt;escape&gt;v. </font></p>
    <p><font size="2">Note. It is possible that the command <strong><font face="Courier New">/usr/dpt/dptmgr</font></strong>
    mistakenly assumes that there is a mouse is attached when there is not. In this case use
    the command <strong><font face="Courier New">/usr/dpt/dptmgrscr</font></strong> to run the
    manager. This is the keyboard-only binary that the <strong><font face="Courier New">/usr/dpt/dptmgr</font></strong>
    script should invoke. </font></p>
    <p><font size="2">For a full description of the Storage Manager&#146;s functions and
    options refer to the notes accompanying the hardware and RAID array setup and the DPT
    SmartRAID User&#146;s Manual. </font></p>
    <p><font size="2">A couple of minor bugs have been seen so far: </font><ol>
      <li><font size="2">If <strong><font face="Courier New">dptmgr</font></strong> is running
        when a drive fails it fails to identify the model type details when the replacement drive
        is re-installed. You cannot view the failed or rebuilding drive. To overcome this, exit
        Storage Manager and run it again. <br>
        <br>
        </font></li>
      <li><font size="2">The error logger seems to generate spurious High temperature detected and
        Normal temperature restored error messages. The card is fitted with a temperature sensor
        and is also able to receive such messages from an attached SmartRAID Storage Cabinet which
        is a proprietary DPT piece of hardware not used by Apricot. </font></li>
    </ol>
    <p><font size="2"><a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top"
    align="left" border="0" hspace="0" width="14" height="10"></a> <a href="#top"><img
    src="../../../graphics/redarr01.gif" alt="Back to Top" align="right" border="0" hspace="0"
    width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx005_5"></a><font size="3"><strong>Emergency floppies</strong></font></p>
    <p><font size="2">There is a potential risk of an inexperienced user damaging the data
    held on the array by using the DPT utilities. For this reason alone it is desirable to
    make an emergency boot set of floppies and a full root filesystem backup using cpio. With
    the emergency floppies and the cpio backup tape the root filesystem can be restored onto a
    re-created <em>system drive</em>. </font></p>
    <p><strong><font size="2">Related documentation</font></strong></p>
    <p><font size="2">Refer to <a href="unx003.htm">Info Guide UNX003</a> for guidance on the
    subject of creation of emergency floppies, backing up, and restoring such tapes onto blank
    (low level formatted) root disks. The Info Guide covers such details as making a hard disk
    bootable, creating the Unix partition, creating the root filesystem and restoring the
    backup tape onto the filesystem. By using this method there is no need to carry out a Unix
    installation from the SCO media prior to restoration of the backup tape.</font></p>
    <p><font size="2"><a href="#top"><img src="../../../graphics/redarr01.gif" alt="Back to Top"
    align="left" border="0" hspace="0" width="14" height="10"></a> <a href="#top"><img
    src="../../../graphics/redarr01.gif" alt="Back to Top" align="right" border="0" hspace="0"
    width="14" height="10"></a> </font></p>
    <hr>
    
    <p>&nbsp;</p>
    <p align="center"><img width="486" height="25" src="../../../images/connectd.gif"
    alt="Computing for a Connected World"> </td>
  </tr>
</table>
</body>
</html>
