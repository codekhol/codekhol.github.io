<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<title>Info Guide UNX002</title>
<style type="text/css"><!--
	body { font-family: Arial, Helvetica, sans-serif; }

//-->
</style>
<meta name="generator" content="Microsoft FrontPage 3.0">
</head>

<body background="../../../images/mits-bg5.gif" bgcolor="#ffffff" link="#d60029"
alink="#d60029" vlink="#800080" leftmargin="0" marginwidth="0" marginheight="6">
<!-- Header - start of top table -->
<table border="0" cellpadding="0" cellspacing="0" width="98%">
<!-- The top table has the Mitsubishi logo and Home button -->
  <tr>
    <td valign="top"><img src="../../../images/m-logo-s.gif" width="193" height="70" alt="Mitsubishi Electric - Computing for a Connected World"></td>
        <td valign="bottom" align="right"><a href="../../../default.htm"><img width="41" height="32" src="../../../images/bt-home.gif" alt="Insight CD Home Page" border="0"></a></td>
  </tr>
  <tr>
    <td width="98%" colspan="2" bgcolor="#000000"><img width="1" height="1" src="../../../images/space.gif"><br>
    </td>
  </tr>
</table>
<!-- end of top table -->


<table border="0" cellpadding="0" cellspacing="0" width="98%">
  <tr>
    <td width="10" bgcolor="#000000"><img width="10" height="10"
    src="../../../images/space.gif"></td>
    <td width="120" valign="top" align="left" bgcolor="#000000"><script LANGUAGE="JavaScript">

<!--

        if (document.images) {

          var product1 = new Image()
          product1.src = "/insight/images/product1.gif"
          var product2 = new Image()
          product2.src = "/insight/images/product2.gif"

          var service1 = new Image()
          service1.src = "/insight/images/service1.gif"
          var service2 = new Image()
          service2.src = "/insight/images/service2.gif"

          var kbase1 = new Image()
          kbase1.src = "/insight/images/kbase1.gif"
          var kbase2 = new Image()
          kbase2.src = "/insight/images/kbase2.gif"       

          var upgrade1 = new Image()
          upgrade1.src = "/insight/images/upgrade1.gif"
          var upgrade2 = new Image()
          upgrade2.src = "/insight/images/upgrade2.gif"       

          var downlo1 = new Image()
          downlo1.src = "/insight/images/downlo1.gif"
          var downlo2 = new Image()
          downlo2.src = "/insight/images/downlo2.gif"       

          var inserv1 = new Image()
          inserv1.src = "/insight/images/inserv1.gif"
          var inserv2 = new Image()
          inserv2.src = "/insight/images/inserv2.gif"       

          var email1 = new Image()
          email1.src = "/insight/images/email1.gif"
          var email2 = new Image()
          email2.src = "/insight/images/email2.gif"       

          var search1 = new Image()
          search1.src = "/insight/images/search1.gif"
          var search2 = new Image()
          search2.src = "/insight/images/search2.gif"       

          var y20001 = new Image()
          y20001.src = "/insight/images/y2001.gif"
          var y20002 = new Image()
          y20002.src = "/insight/images/y2002.gif"

          var osites1 = new Image()
          osites1.src = "/insight/images/osites1.gif"
          var osites2 = new Image()
          osites2.src = "/insight/images/osites2.gif"

          var disclaim1 = new Image()
          disclaim1.src = "/insight/images/disclam1.gif"
          var disclaim2 = new Image()
          disclaim2.src = "/insight/images/disclam2.gif"

        }



        function act(imgName) {
          if (document.images)
            document[imgName].src = eval(imgName + '2.src')
        }



        function inact(imgName) {
          if (document.images)
            document[imgName].src = eval(imgName + '1.src')
        }

        // -->
</script>


    <a HREF="../../../products/main.htm" onMouseOver="act('product')" onMouseOut="inact('product')"><img width="113" height="22" src="../../../images/product1.gif" name="product" alt="Products" border="0"></a><br>

    <a HREF="../../../services/main.htm" onMouseOver="act('service')" onMouseOut="inact('service')"><img width="113" height="22" src="../../../images/service1.gif" name="service" alt="Services" border="0"></a><br>

    <a HREF="../../main.htm"><img width="113" height="22" src="../../../images/kbase2.gif" name="kbase" alt="Knowledgebase" border="0"></a><br>
       <a HREF="../../ipb/ipbmain.htm"><img width="113" height="17" src="../../../images/s_ipb.gif" alt="Bulletins (IPBs)" border="0"></a><br>
       <a HREF="../guidecon.htm"><img width="113" height="17" src="../../../images/s_guides.gif" alt="Guides" border="0"></a><br>
       <a HREF="../../faq/main.htm"><img width="113" height="17" src="../../../images/s_faq.gif" alt="FAQs" border="0"></a><br>
       <a HREF="../manuals/menu.htm"><img width="113" height="17" src="../../../images/s_manual.gif" alt="Owner's Handbooks" border="0"></a><br>
       <a HREF="../../../common/infact/menu.htm"><img width="113" height="17" src="../../../images/s_datash.gif" alt="Product Datasheets" border="0"></a><br>
       <a HREF="../../../common/misc/menu.htm"><img width="113" height="17" src="../../../images/s_misc.gif" alt="Miscellaneous Items" border="0"></a><br>

    <a HREF="../../../upgrades/main.htm" onMouseOver="act('upgrade')" onMouseOut="inact('upgrade')"><img width="113" height="22" src="../../../images/upgrade1.gif" name="upgrade" alt="Upgrades" border="0"></a><br>

    <a HREF="../../../download/main.htm" onMouseOver="act('downlo')" onMouseOut="inact('downlo')"><img width="113" height="22" src="../../../images/downlo1.gif" name="downlo" alt="Downloads" border="0"></a><br>

    <a HREF="../../../insindex.exe" onMouseOver="act('search')" onMouseOut="inact('search')"><img width="113" height="22" src="../../../images/search1.gif" name="search" alt="Search Insight" border="0"></a><br>
    <a HREF="mailto:insight@mitsubishi-computers.com" onMouseOver="act('email')" onMouseOut="inact('email')"><img width="113" height="22" src="../../../images/email1.gif" name="email" alt="E-Mail us" border="0"></a><br>
    <a HREF="http://www.mitsubishi-computers.com/support/service/" onMouseOver="act('inserv')" onMouseOut="inact('inserv')"><img width="113" height="22" src="../../../images/inserv1.gif" name="inserv" alt="Insight Service" border="0"></a><br>

    <a HREF="../../../common/year2000/year2000.htm" onMouseOver="act('y2000')" onMouseOut="inact('y2000')"><img width="113" height="21" src="../../../images/y2001.gif" name="y2000" alt="Year 2000" border="0"></a><br>
    <a HREF="../../../common/oth-site/oth-site.htm" onMouseOver="act('osites')" onMouseOut="inact('osites')"><img width="113" height="38" src="../../../images/osites1.gif" name="osites" alt="Other Mitsubishi Sites" border="0"></a><br>
    <a HREF="../../../common/disclaim.htm" onMouseOver="act('disclaim')" onMouseOut="inact('disclaim')"><img width="113" height="24" src="../../../images/disclam1.gif" name="disclaim" alt="Site Disclaimer" border="0"></a><br>
      
    <img width="113" height="120" src="../../../images/space.gif"><br>
</td>
    <td width="10" valign="top" width="10" height="10" src="/insight/images/space.gif"
    alt="10 pixel Gap" border="0"></td>

    <td valign="top"><font size="2"><br>
    </font><font face="Arial,Helvetica" size="4" color="#D60029"><strong>Info Guide UNX002:<br>
    SCO Unix 3.2v4.2 on the FT//ex with Mylex RAID controller</strong></font><p><font size="2">Throughout
    this Info Guide the following typefaces have special meaning: </font></p>
    <table CELLPADDING="5">
      <tr>
        <td><font size="2"><strong><font face="Courier New">daccf</font></strong> </font></td>
        <td><font size="2">-</font></td>
        <td><font size="2">The name of a command, file, menu item, or on-screen option.</font></td>
      </tr>
      <tr>
        <td><font size="2"><font face="Courier New">Boot</font> </font></td>
        <td><font size="2">-</font></td>
        <td><font size="2">Output displayed on screen.</font></td>
      </tr>
      <tr>
        <td><u><font size="2" face="Courier New">arad dac960</font></u></td>
        <td><font size="2">-</font></td>
        <td><font size="2">Keyboard input</font></td>
      </tr>
      <tr>
        <td><font size="2"><em>system pack</em> </font></td>
        <td><font size="2">-</font></td>
        <td><font size="2">Terminology used by Mylex and is described in the Mylex User's Manual</font></td>
      </tr>
    </table>
    <p><font size="2">This Info Guide makes the following assumptions: </font><ul>
      <li><font size="2">That the Mylex card and the hot-plug backplane have been installed in the
        FT//ex. For guidance with these tasks review the installation documentation supplied with
        them. This guide will however, detail the EISA Configuration Utility disk settings and
        power supply related issues. <br>
        <br>
        </font></li>
      <li><font size="2">That a single array of drives configured as a RAID 5 array is to be
        installed. This type of array provides drive redundancy without the need for duplicating
        the entire array of drives with a mirrored array, and provides a disk performance increase
        through striping. RAID 5 is the default configuration for the Mylex card and requires at
        least 3 drives. Assuming all drives are of the same size, an amount of storage capacity
        equal to that of one drive in the array is lost, it being used throughout the array to
        hold parity information for rebuilding data should a drive fail. So, for an array of 5
        drives each of 1Gb, the size of the <em>system drive</em> (as Mylex refer to it) that the
        Mylex card offers the host is 4Gb. <br>
        <br>
        </font></li>
      <li><font size="2">That SCO Unix 3.2v4.2 is to be installed from a SCSI tape set to ID 2
        connected to the on-board AIC-7770. An installation from CD-ROM connected similarly should
        be similar, but note that the CD-ROM must be set to ID 5, this being an SCO feature. </font></li>
    </ul>
    <p><font size="2">Only Apricot supported drives for the FT//ex with Mylex card should be
    used. At the time of writing these being the Quantum 525Mb, IBM 1Gb (Spitfire), and
    Seagate 2Gb (Barracuda). Supported drives in the future will include the IBM Starfire 1,
    2, and 5Gb. </font></p>
    <p><font size="2">Follow these notes in the order written to start from an unconfigured
    system through to SCO Unix installed onto a RAID 5 drive array. <br>
    </font><menu>
      <a HREF="#UNX002_1"><p><font size="2">FT//ex configuration</a><br>
      <a HREF="#UNX002_2">Define a system drive</a><br>
      <a HREF="#UNX002_3">Installing SCO Unix</a><br>
      <a HREF="#UNX002_4">Mylex utilities</a><br>
      <a HREF="#UNX002_5">Emergency floppies</a> </font></p>
    </menu>
    <p>&nbsp;</p>
    <p><font size="2">(5th July 1994) <br>
    <br>
    <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0" ALIGN="LEFT" ALT="Back to Top"
    width="14" height="10"></a> <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0"
    ALIGN="RIGHT" ALT="Back to Top" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx002_1"></a><font size="3"><strong>FT//ex configuration</strong></font></p>
    <p><font size="2"><strong>Mylex</strong> </font></p>
    <p><font size="2">The EISA Configuration Utility (ECU) settings for the Mylex card are as
    follows: </font></p>
    <table>
      <tr>
        <td><em><font size="2">BIOS (16K) Base Address </font></em></td>
        <td><font size="2">0CC000H - Default</font></td>
      </tr>
      <tr>
        <td><em><font size="2">DAC960 disk spin-up options </font></em></td>
        <td><font size="2">1 disk started every 6 secs</font></td>
      </tr>
      <tr>
        <td><em><font size="2">DAC960 SCSI Channel 0 transfer-rate(upper limit) </font></em></td>
        <td><font size="2">Synchronous, 10 mega-transfers per second (FAST)Default</font></td>
      </tr>
      <tr>
        <td><em><font size="2">DAC960 SCSI Channel 0 tag-queuing(SCSI-2) </font></em></td>
        <td><font size="2">Enable tag-queuingDefault</font></td>
      </tr>
      <tr>
        <td><em><font size="2">DAC960 SCSI Channel 1 transfer-rate(upper limit) </font></em></td>
        <td><font size="2">Synchronous, 10 mega-transfers per second (FAST)Default</font></td>
      </tr>
      <tr>
        <td><em><font size="2">DAC960 SCSI Channel 1 tag-queuing(SCSI-2) </font></em></td>
        <td><font size="2">Enable tag-queuingDefault</font></td>
      </tr>
      <tr>
        <td><em><font size="2">DAC960 Interrupt Interrupt 15 (edge) </font></em></td>
      </tr>
    </table>
    <p><font size="2">The strap settings for the card should be correct but the following
    should be checked: </font></p>
    <table>
      <tr>
        <td><em><font size="2">JP5 shorted </font></em></td>
        <td><font size="2">Provides termination at the card end and 5Volt terminator power to the
        SCSI bus.</font></td>
      </tr>
      <tr>
        <td><em><font size="2">JP2 open </font></em></td>
        <td><font size="2">Reserved and should be set as stated</font></td>
      </tr>
      <tr>
        <td><em><font size="2">Others </font></em></td>
        <td><font size="2">Refer to Mylex User's Manual Not relevant to Apricot hardware.</font></td>
      </tr>
    </table>
    <p><font size="2"><strong>AIC-7770</strong> </font></p>
    <p><font size="2">Disable the AIC-7770 BIOS from within the Advanced Setup menu of the
    FT//ex (<u><font face="Courier New">&lt;cntrl&gt;&lt;alt&gt;&lt;esc&gt;</font></u> during
    DOS boot) by setting <strong><font face="Courier New">SCSI I/O ROM Mapping</font></strong>
    to <strong><font face="Courier New">Disabled</font></strong>. The ECU settings are as
    follows, of note here is the interrupt setting which should remain on its default of IRQ
    11 for an SCO Unix installation: </font><menu>
      <table cellspacing="0" cellpadding="3">
        <tr>
          <td><strong><em><font size="2">Host Adapter Interface Definitions </font></em></strong></td>
          <td></td>
        </tr>
        <tr>
          <td><em><font size="2">Interrupt Level </font></em></td>
          <td><font size="2">IRQ 11</font></td>
        </tr>
        <tr>
          <td><em><font size="2">Bus Release Time </font></em></td>
          <td><font size="2">60 BCLKS</font></td>
        </tr>
        <tr>
          <td><em><font size="2">Data FIFO Threshold </font></em></td>
          <td><font size="2">100%</font></td>
        </tr>
        <tr>
          <td><strong><em><font size="2">SCSI Channel A Configuration </font></em></strong></td>
          <td></td>
        </tr>
        <tr>
          <td><em><font size="2">Host Adapter SCSI ID </font></em></td>
          <td><font size="2">7</font></td>
        </tr>
        <tr>
          <td><em><font size="2">SCSI Bus Parity Check </font></em></td>
          <td><font size="2">Enabled</font></td>
        </tr>
        <tr>
          <td><em><font size="2">SCSI Selection Timeout </font></em></td>
          <td><font size="2">256 milliseconds</font></td>
        </tr>
        <tr>
          <td><em><font size="2">SCSI Bus Reset at Power-on </font></em></td>
          <td><font size="2">Enabled</font></td>
        </tr>
        <tr>
          <td><strong><em><font size="2">SCSI Channel B Configuration </font></em></strong></td>
          <td></td>
        </tr>
        <tr>
          <td><em><font size="2">Host Adapter SCSI ID </font></em></td>
          <td><font size="2">7</font></td>
        </tr>
        <tr>
          <td><em><font size="2">SCSI Bus Parity Check </font></em></td>
          <td><font size="2">Enabled</font></td>
        </tr>
        <tr>
          <td><em><font size="2">SCSI Selection Timeout </font></em></td>
          <td><font size="2">256 milliseconds</font></td>
        </tr>
        <tr>
          <td><em><font size="2">SCSI Bus Reset at Power-on </font></em></td>
          <td><font size="2">Enabled</font></td>
        </tr>
        <tr>
          <td><em><font size="2"><strong>Primary Channel Selection</strong> </font></em></td>
          <td><font size="2">A</font></td>
        </tr>
        <tr>
          <td><strong><em><font size="2">BIOS and Device configuration </font></em></strong></td>
          <td><font size="2">Select &quot;Device configuration&quot; and select &quot;DEFAULT&quot;</font></td>
        </tr>
      </table>
    </menu>
    <p><font size="2">Note that additional SCSI devices such as a tape (set to ID 2) and
    CD-ROM (set to ID 5) should be attached to the AIC-7770, not to the Mylex card. </font></p>
    <p><font size="2"><strong>Power supply cabling</strong> </font></p>
    <p><font size="2">An instance has been seen where upon adding a sixth IBM 1Gb drive to an
    installation consisting of a five drive array plus CD-ROM and tape drive, two of the
    existing drives powered down. The power supply is able to power such a configuration, but
    the power supply loom connector locations should be checked to safeguard against such
    possibilities. </font></p>
    <p><font size="2">Apart from the power supply wiring that connects to the mother board,
    there are three distinct groups of wires for connecting drives, fans, etc. Two of these
    groups of wires from the power supply are arranged in two 6 way rectangular connectors.
    Connect these to the 3 connectors on the rear of the hot-plug backplane via standard drive
    power connectors on the daisy-chain wiring that is plugged into these 6 way connectors.
    One group will be connected via 2 drive power connectors that are very close together on
    their wiring run, and the other should be connected via the first drive power connector on
    its wiring run. Use the third group of wires which consists of 4 wires (2 black, 1 red, 1
    blue) to connect to the CD-ROM and tape drive. </font></p>
    <p><font size="2"><strong>Label drive trays</strong> </font></p>
    <p><font size="2">Label the drive trays that are fitted with hard disks with their SCSI
    ID. This will allow location of a drive when action is required in response to messages
    from the Mylex firmware/BIOS or the Mylex software utilities. <br>
    <br>
    <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0" ALIGN="LEFT" ALT="Back to Top"
    width="14" height="10"></a> <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0"
    ALIGN="RIGHT" ALT="Back to Top" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx002_2"></a><font size="3"><strong>Define a system drive</strong></font></p>
    <p><font size="2">Before the SCO Unix installation can be started the drive array has to
    be configured to present what Mylex call a <em>system drive</em> to the system. This is
    done by using the Mylex DOS utility <strong><font face="Courier New">daccf</font></strong>
    in the <strong><font face="Courier New">\daccfg</font></strong> directory of the DOS
    utilities disk supplied with the card. This will be described in this section. </font></p>
    <p><strong><font size="2">Mylex BIOS does not recognise a system drive </font></strong></p>
    <p><font size="2">When the system boots up observe the messages from the Mylex BIOS and
    firmware. Once the hardware is installed and configured as in the previous sections the
    system will probably show the following messages: </font><menu>
      <p><font size="2"><font face="Courier New">DAC960 BIOS Version 1.16 - March 4, 1994<br>
      Mylex Corporation<br>
      <br>
      DAC960 Firmware Version 1.99<br>
      No drives found : None installed<br>
      Press any key to continue</font> </font></p>
    </menu>
    <p><font size="2">The above message will also occur for a configured RAID system if the
    machine is powered up with a hard disk removed from the backplane, or a drive does not
    spin-up in time. </font></p>
    <p><font size="2"><strong>Formatting drives</strong> </font></p>
    <p><font size="2">If you wish, new drives can be formatted by the Mylex card. Do this by
    running the <strong><font face="Courier New">daccf</font></strong> utility. Once it has
    scanned for the installed drives select from the main menu, then select <strong><font
    face="Courier New">Format Drive</font></strong> from the <strong><font face="Courier New">Tools</font></strong>
    menu. Use the arrow keys to highlight the drive to format from the pictorial display of
    drives that are <em>ready</em>. Mylex describe drives that are seen but not configured as
    part of a <em>system pack</em> as <em>ready</em> - the pictorial labels these drives RDY. </font></p>
    <p><strong><font size="2">Creating RAID 5 array - the default for at least 3 drives </font></strong></p>
    <p><font size="2">Select <strong><font face="Courier New">Automatic Configuration</font></strong>
    from the <strong><font face="Courier New">Main Menu</font></strong> to configure a RAID 5
    array. You will be asked <font face="Courier New">Do you want to have the Write Cache
    enabled?</font> Select <strong><font face="Courier New">Yes</font></strong> to this
    question. Selecting <strong><font face="Courier New">No</font></strong> means that the
    Mylex card acknowledges a write operation only after it has received confirmation of a
    write from the drives in the array in the same way as a non-caching disk controller.
    Selecting <strong><font face="Courier New">Yes</font></strong> means that the card gives
    an acknowledgement as soon as it has written the data to its cache, updating the drive at
    some later time. </font></p>
    <p><font size="2">Select <strong><font face="Courier New">Initialize System Drive</font></strong>
    from the <strong><font face="Courier New">Main Menu</font></strong>. Select <strong><font
    face="Courier New">Sys Drv 0</font></strong> followed by <strong><font face="Courier New">Start</font></strong>
    and then select <strong><font face="Courier New">Yes</font></strong> to proceed.
    Initialisation takes a considerable time. </font></p>
    <p><font size="2">At this point a <em>system drive</em> of 4Gb will exist for a
    configuration consisting of five 1Gb drives as an example. More complex arrangements can
    be configured by splitting a <em>system pack</em> into multiple <em>system drives</em> or
    by installing multiple <em>physical packs</em> that contain multiple <em>system packs</em>
    and <em>system drives</em>. However, the Mylex User's Manual should be studied for a
    description of such configurations and terminology. </font></p>
    <p><font size="2">The largest array possible using a single Mylex card, which is the only
    Apricot supported configuration, is seven drives. Assuming a RAID 5 configuration without
    a <em>standby drive</em> using 1Gb drives, a <em>system drive</em> of 6Gb would be
    available. </font></p>
    <p><font size="2">For interest, select <strong><font face="Courier New">View / Update
    Configuration</font></strong> followed by <strong><font face="Courier New">Define Pack</font></strong>
    or <strong><font face="Courier New">Define System Drive</font></strong> to view the
    geometry of the configuration. Note that the <strong><font face="Courier New">Define Pack</font></strong>
    option will show the physical disks as <em>online</em> (marked as <font face="Courier New">ONL</font>
    in the pictorial view of the hard disks). Selecting <strong><font face="Courier New">Tools</font></strong>
    from the main menu will also show the status of all the physical disks connected to the
    Mylex card, this is much quicker than the <strong><font face="Courier New">View / Update
    Configuration</font></strong> option and is best for merely viewing the status of the
    drives. </font></p>
    <p><font size="2">On boot-up the Mylex firmware and BIOS should now give the following
    messages: </font><menu>
      <p><font size="2"><font face="Courier New">DAC960 BIOS Version 1.16 - March 4, 1994<br>
      Mylex Corporation<br>
      <br>
      DAC960 Firmware Version 1.99<br>
      DAC960 Memory = 4 Mbytes<br>
      1 system drive installed</font><br>
      </font></p>
    </menu>
    <p><strong><font size="2">daccf cannot find any drives </font></strong></p>
    <p><font size="2">The Mylex firmware and BIOS message may indicate that one or more drives
    are not responding. This will almost certainly be because the EISA Configuration Utility
    option <strong><font face="Courier New">DAC960 disk spin-up</font></strong> options will
    be set to <strong><font face="Courier New">Disabled:disks spin on power-up</font></strong>.
    Ensure that it is set to <strong><font face="Courier New">1 disk started every 6 secs</font></strong>
    as shown in the section entitled &quot;<a HREF="#UNX002_1">FT//ex configuration</a>&quot;
    earlier in this guide. </font></p>
    <p><font size="2">If the option is set incorrectly as above you may need to power the
    system off and leave for about 30 seconds before powering up again. This action may have
    to be repeated several times to get the drives recognised. </font></p>
    <p><font size="2">If the ECU option referred to above is set correctly and drives are
    still not recognised, review the sub-section later in these notes entitled &quot;DAC960
    Toolkit&quot; in the &quot;<a HREF="#UNX002_4">Mylex utilities</a>&quot; section. It may
    be that the card's NVRAM setup needs forcing to recognise the drives. </font></p>
    <p><font size="2"><strong>Creating configurations other than a single RAID5 array</strong>
    </font></p>
    <p><font size="2">For drive configurations other than the default described in the above
    sub-section you are advised to read the Mylex User's Manual, in particular the chapter
    describing the use of the <strong><font face="Courier New">daccf</font></strong> utility. </font></p>
    <p><strong><font size="2">Configuring a standby drive</font></strong></p>
    <p><font size="2">Another configuration which is similar to the default RAID 5
    configuration is one where a RAID 5 array is defined as a <em>system drive</em> and
    another disk is defined as a <em>standby drive</em>. In such a configuration, should a
    drive fail within the RAID 5 array the array becomes <em>critical</em> and automatically
    brings the <em>standby drive</em> into the array and commences a <em>rebuild</em> making
    it a redundant array once more. Refer to the <strong><font face="Courier New">daccf</font></strong>
    chapter of the manual. <br>
    <br>
    <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0" ALIGN="LEFT" ALT="Back to Top"
    width="14" height="10"></a> <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0"
    ALIGN="RIGHT" ALT="Back to Top" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx002_3"></a><font size="3"><strong>Installing SCO Unix</strong></font></p>
    <p><font size="2">In addition to the SCO distribution floppies and tape, BTLD driver disks
    are required for the on-board Adaptec AIC-7770 and the Mylex DAC960E. These disks are
    labelled: </font><menu>
      <p><font size="2">AIC-7770 SCSI Utilities for SCO Unix Ver.:1.11<br>
      Mylex DAC960E RAID SCO Unix Drivers BTLD </font></p>
    </menu>
    <p><font size="2">Boot from the SCO N1 floppy as normal and at the Boot: prompt enter <u><font
    face="Courier New">link</font></u>. Enter the following when asked what drivers are to be
    linked in: </font><menu>
      <p><font size="2"><u><font face="Courier New">arad dac960</font></u> </font></p>
    </menu>
    <p><font size="2">Continue with a normal installation. You will be asked to insert the
    volumes that contain these drivers on two separate occasions during the installation. </font></p>
    <p><font size="2">The installation will default to a SCSI tape on ID 2 connected to the
    AIC-7770 (arad driver). If a CD-ROM is being used the installation will say that the
    CD-ROM is to be on SCSI&nbsp;ID&nbsp;5, as mentioned in the Introduction section. </font></p>
    <p><font size="2">Once SCO Unix is installed check the <strong><font face="Courier New">/etc/conf/cf.d/mscsi</font></strong>
    file for a SCSI tape entry. If not present re-create the SCSI tape with the <strong><font
    face="Courier New">mkdev tape</font></strong> command in the normal manner. <br>
    <br>
    <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0" ALIGN="LEFT" ALT="Back to Top"
    width="14" height="10"></a> <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0"
    ALIGN="RIGHT" ALT="Back to Top" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx002_4"></a><font size="3"><strong>Mylex utilities</strong></font></p>
    <p><font size="2">The five utilities are as follows: </font></p>
    <table cellspacing="0" cellpadding="3">
      <tr VALIGN="TOP">
        <td valign="top"><font size="2" face="Courier New"><strong>dacmon1d</strong></font></td>
        <td><font size="2">utility to monitor the activities of the DAC960E. Also included is
        dacmon2d for a second card, however the standard Apricot supported configuration is a
        single card only. </font></td>
      </tr>
      <tr VALIGN="TOP">
        <td valign="top"><font size="2" face="Courier New"><strong>dac960tk</strong></font></td>
        <td><font size="2">toolkit for inquiring, setting, and changing the status of the array.
        Can be accessed from the menu driven shell utility dac960sh. Performs some low level and
        potentially dangerous operations - use with care. </font></td>
      </tr>
      <tr VALIGN="TOP">
        <td valign="top"><font size="2" face="Courier New"><strong>sync</strong></font></td>
        <td><font size="2">replacement of the SCO sync binary. It carries out the additional task
        of flushing the Mylex card's disk cache. </font></td>
      </tr>
      <tr VALIGN="TOP">
        <td valign="top"><font size="2" face="Courier New"><strong>dac960sh</strong></font></td>
        <td><font size="2">menu driven sysadmsh style front end to some of the above commands. </font></td>
      </tr>
      <tr VALIGN="TOP">
        <td valign="top"><strong><font size="2" face="Courier New">dacdisk</font></strong></td>
        <td><font size="2">utility to create additional file systems on system drives other than
        the first. Beyond the scope of this Info Guide as only a single system drive is considered
        here. </font></td>
      </tr>
    </table>
    <p><strong><font size="2">Installation of the utilities</font></strong></p>
    <p><font size="2">The utilities are supplied on a tar format floppy. Before installing
    them you are directed by the Mylex manual to move <strong><font face="Courier New">/bin/sync</font></strong>
    to <strong><font face="Courier New">/bin/sync.old</font></strong>, as the <strong><font
    face="Courier New">sync</font></strong> binary is replaced by the Mylex version which
    carries out the additional task of flushing the disk cache on the card to the drives. </font></p>
    <p><font size="2">Use the following commands: </font><menu>
      <p><font size="2"><font face="Courier New"># mv /bin/sync /bin/sync.old<br>
      # cd /<br>
      # tar xvf /dev/fd0</font> </font></p>
    </menu>
    <p><font size="2"><em><strong>Suggested modifications</strong></em><br>
    Once the utilities are installed it is suggested that the following modifications be made.
    </font><ul>
      <li><font size="2">The monitor utility that logs failures of drives and other important
        messages from the Mylex card (<strong><font face="Courier New">dacmon1d</font></strong>)
        should be running at all times. Add an entry such as the one below to the <strong><font
        face="Courier New">/etc/rc2.d/S88USRDEFINE</font></strong> to ensure this: <br>
        </font><p><font size="2" face="Courier New">#### Mylex DAC960E status monitor<br>
        if [ -x /bin/dacmon1d ]<br>
        then <br>
        </font><menu>
          <p><font size="2" face="Courier New">/bin/dacmon1d &amp;<br>
          echo &quot;Mylex DAC960E status monitor\n&quot; </font></p>
        </menu>
        <p><font size="2" face="Courier New">else </font><menu>
          <p><font size="2" face="Courier New">echo &quot;Mylex DAC960E status monitor not running -
          RECTIFY&quot; </font></p>
        </menu>
        <p><font size="2" face="Courier New">fi<br>
        #### </font></p>
        <p>&nbsp;</p>
      </li>
      <li><font size="2">The monitor utility <strong><font face="Courier New">dacmon1d</font></strong>
        logs its messages to the file <strong><font face="Courier New">/usr/dac960/dac01log</font></strong>
        for the first Mylex card. The Mylex manual refers to the log file <strong><font
        face="Courier New">dac02log</font></strong>, this being the logfile for a second card if
        configured. However, as stated earlier, the standard Apricot supported configuration is
        for a single card only. Messages are also sent to the console, but are not send to the <strong><font
        face="Courier New">/usr/adm/messages</font></strong> file. <br>
        <br>
        It is suggested therefore that a script is added that is run by cron at a frequent
        interval such as every hour that checks the log file for messages. It should do such
        things as update the <strong><font face="Courier New">/usr/adm/messages</font></strong>
        file and mail the system administrator. Contact Unix Support for such a script. </font></li>
    </ul>
    <p><strong><font size="2">Using the utilities</font></strong></p>
    <p><font size="2"><em><strong>DAC960 Sysadmin Shell</strong></em> <br>
    The main utility that will be used is the menu based DAC960 Sysadmin Shell (<strong><font
    face="Courier New">/bin/dac960sh</font></strong>). Refer to the Mylex User's Manual for a
    full description. Briefly though it is used for the following tasks: </font><ul>
      <li><font size="2">Selecting the Mylex card to be accessed. However, the standard Apricot
        supported configuration is a single Mylex card so it will be selected automatically. <br>
        <br>
        </font></li>
      <li><font size="2">Viewing the status of the physical drives. Select <strong><font
        face="Courier New">Rebuild</font></strong> or <strong><font face="Courier New">Change
        Device</font></strong> and check that no drives are marked DD which indicates that they
        are <em>dead</em>. If the DAC960sh has been left running on screen then return to its main
        menu and re-select the option desired to ensure an up-to-date display of disk status. A
        recent <em>dead</em> drive may not show as <font face="Courier New">DD</font> if the <strong><font
        face="Courier New">Rebuild</font></strong> or <strong><font face="Courier New">Change
        Device</font></strong> screen has been left on display. <br>
        <br>
        </font></li>
      <li><font size="2">Changing a faulty drive. When you want to hot-swap a defective drive
        select the <strong><font face="Courier New">Change Device</font></strong> option. Then
        select the drive to be replaced and the SCSI bus will be halted. Replace the drive with an
        identical type set for the same SCSI ID and once it has spun-up enter <u><font
        face="Courier New">resume</font></u> to restart the SCSI bus. The drive array must then be
        rebuilt, see below. <br>
        <br>
        </font></li>
      <li><font size="2">Rebuilding the drive array. Once a faulty drive has been replaced as
        above, select the <strong><font face="Courier New">Rebuild</font></strong> option. Then
        select the drive shown as <em>dead</em> to be rebuilt. System performance will suffer
        whilst the array is rebuilding, but normal work of users continues. <br>
        <br>
        </font></li>
      <li><font size="2">Running the DAC960 Toolkit. The toolkit utility can be run from the
        command line as <strong><font face="Courier New">/bin/dac960tk</font></strong>, however it
        can also be run by selecting <strong><font face="Courier New">DAC960 Toolkit</font></strong>
        from the main menu. See below for its likely uses. </font></li>
    </ul>
    <p><font size="2"><em><strong>Recovering from a drive failure</strong></em><br>
    The system administrator will be informed of a drive failure by entries in the log file <strong><font
    face="Courier New">/usr/dac960/dac01log</font></strong> and other means (see
    &quot;suggested modifications&quot; in the &quot;Mylex utilities&quot; section earlier in
    this guide). </font></p>
    <p><font size="2">To recover from such a failure the following steps should be carried out
    in order. Refer to the previous sub-section entitled &quot;DAC960 Sysadmin Shell&quot;: </font><ol>
      <li><font size="2">Obtain a replacement drive of an identical type. Set it to the same SCSI
        ID of the failed drive. <br>
        <br>
        </font></li>
      <li><font size="2">There will probably be a spare drive tray available in the system, so you
        may choose to use this to mount the new drive ahead of removing the faulty drive. Label
        this tray with the SCSI ID of the new drive and remove the labelling from the tray at
        present containing the faulty drive. <br>
        <br>
        </font></li>
      <li><font size="2">Hot-swap the faulty drive by selecting the <strong><font
        face="Courier New">Change Device</font></strong> option. This action will halt the SCSI
        bus to eliminate any glitches produced when hot-swapping the drive from causing a problem.
        <br>
        <br>
        </font></li>
      <li><font size="2">Rebuild the drive array by selecting the <strong><font face="Courier New">Rebuild</font></strong>
        option. </font></li>
    </ol>
    <p><font size="2"><em><strong>DAC960 Toolkit</strong></em> <br>
    Use of the toolkit will not usually be required, and its use without care &quot;could
    incur catastrophic effects&quot;, to quote the Mylex User's Manual. The toolkit can also
    be run as a DOS utility from the DOS utility floppy supplied with the card. For a full
    understanding of the toolkit refer to the Mylex manual where the DOS utility description
    covers the Unix version also. Briefly, the most likely uses of the toolkit are as follows
    (given below are the option numbers as shown in the tookit main menu): </font><ul>
      <li><font size="2"><strong><font face="Courier New">4. Make Standby.</font></strong><br>
        This option is used when you have added a disk to an existing configuration and want to
        configure it as a <em>standby drive</em>. This then becomes a disk that the card uses to
        automatically replace a failed disk. A <em>standby drive</em> cannot be added to an
        existing configuration with the DAC960 Sysadmin Shell. <br>
        <br>
        </font></li>
      <li><font size="2"><strong><font face="Courier New">7. Set Device State and 3. Start Device.</font></strong><br>
        There should never be a need to use these options under the Unix version of the toolkit.
        Use these two options in the above order when first installing the system. You are only
        likely to need to use them from the DOS based toolkit to force the state of the attached
        disks as stored in the Mylex card's NVRAM. Use them as below if the Mylex DOS
        configuration utility (<strong><font face="Courier New">\daccfg\daccf.exe</font></strong>)
        does not recognise the disks. Refer back to the earlier section entitled &quot;Configure a
        system drive with daccf&quot; if necessary. <br>
        <br>
        From the toolkit main menu enter the following to force the state of SCSI ID 3: <br>
        <br>
        </font><table>
          <tr>
            <td><font size="2" face="Courier New"><u>7 </u></font></td>
            <td><font size="2">- </font></td>
            <td><font size="2">this to select the <strong><font face="Courier New">Set Device State</font></strong>
            option.</font></td>
          </tr>
          <tr>
            <td><font size="2" face="Courier New"><u>0 </u></font></td>
            <td><font size="2">- </font></td>
            <td><font size="2">this to select the SCSI channel (always 0 on Apricot supplied single
            SCSI channel Mylex cards).</font></td>
          </tr>
          <tr>
            <td><font size="2" face="Courier New"><u>3 </u></font></td>
            <td><font size="2">- </font></td>
            <td><font size="2">this to select SCSI ID 3</font></td>
          </tr>
          <tr>
            <td><font size="2" face="Courier New"><u>3 </u></font></td>
            <td><font size="2">- </font></td>
            <td><font size="2">this to select the <strong><font face="Courier New">Start Device</font></strong>
            option.</font></td>
          </tr>
          <tr>
            <td><font size="2" face="Courier New"><u>0 </u></font></td>
            <td><font size="2">- </font></td>
            <td><font size="2">this to select SCSI channel 0.</font></td>
          </tr>
          <tr>
            <td><u><font size="2" face="Courier New">3 </font></u></td>
            <td><font size="2">- </font></td>
            <td><font size="2">this to select SCSI ID 3.</font></td>
          </tr>
        </table>
        <p><font size="2">Use the above sequence for each SCSI ID of the disks attached to the
        card. </font></p>
      </li>
    </ul>
    <p><font size="2"><br>
    <br>
    <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0" ALIGN="LEFT" ALT="Back to Top"
    width="14" height="10"></a> <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0"
    ALIGN="RIGHT" ALT="Back to Top" width="14" height="10"></a> </font></p>
    <hr>
    <p><a name="unx002_5"></a><font size="3"><strong>Emergency floppies</strong></font></p>
    <p><font size="2">There is a potential risk of an inexperienced user damaging the data
    held on the array by using the Mylex toolkit utilities. For this reason alone it is
    desirable to make an emergency boot set of floppies and a full root filesystem backup
    using cpio. With the emergency floppies and the cpio backup tape the root filesystem can
    be restored onto a re-created <em>system drive</em>. </font></p>
    <p><font size="2">The use of emergency floppies to prepare a drive and then restore a root
    filesystem cpio tape is covered fully in <a HREF="unx003.htm">Info Guide UNX003</a>. </font></p>
    <p><font size="2"><strong>Creating the floppies</strong> </font></p>
    <p><font size="2">If emergency floppies are created in the normal way a Unix Panic may be
    encountered when booting from such floppies. For this reason we advise using the following
    procedure to make and then use the emergency floppies: </font><ol>
      <li><font size="2">Make a boot floppy and root filesystem floppy in the normal manner by
        entering <u><font face="Courier New">mkdev fd</font></u>. <br>
        <br>
        </font></li>
      <li><font size="2">You now need to replace the kernel on the boot floppy with one without
        the Mylex driver. Do the following: <br>
        <br>
        </font><ul>
          <li><font size="2">Edit the files <strong><font face="Courier New">/etc/conf/sdevice.d/dac1</font></strong>
            and <strong><font face="Courier New">dac2</font></strong> on the hard disk, changing the Y
            to N. Re-link the kernel, but answer <u><font face="Courier New">N</font></u> to the
            question asking if this is to be the booting kernel. <br>
            <br>
            </font></li>
          <li><font size="2">Mount the boot floppy and copy this kernel to it by entering: <br>
            <br>
            <u><font face="Courier New">#mount /dev/fd0 /mnt<br>
            #cp /etc/conf/cf.d/unix /mnt</font></u><br>
            <br>
            </font></li>
          <li><font size="2">Once the replacement kernel is copied to the boot floppy edit the <strong><font
            face="Courier New">dac1</font></strong> and <strong><font face="Courier New">dac2</font></strong>
            files back to Y. <br>
            </font></li>
          <li><font size="2">Unmount the boot floppy by entering <u><font face="Courier New">umount
            /dev/fd0</font></u>. </font></li>
        </ul>
        <p>&nbsp;</p>
      </li>
      <li><font size="2">The Mylex utilities can be copied to the emergency floppies so that there
        is no need to reboot and use the DOS based versions. Do the following: <br>
        <br>
        </font><ul>
          <li><font size="2">Mount the emergency root floppy on /mnt and create the directory <strong><font
            face="Courier New">/mnt/usr/lib/terminfo/a</font></strong> and copy the file <strong><font
            face="Courier New">ansi</font></strong> from the hard disk to it by entering: <br>
            <br>
            <u><font face="Courier New">#mount /dev/fd0 /mnt<br>
            #mkdir /mnt/usr/lib/terminfo/a<br>
            #cp /usr/lib/terminfo/a/ansi /mnt/usr/lib/terminfo/a</font></u> <br>
            <br>
            </font></li>
          <li><font size="2">Add the entries <strong><font face="Courier New">TERM=ansi</font></strong>
            and <strong><font face="Courier New">export TERM</font></strong> to the root floppy&#146;s
            .profile file (<strong><font face="Courier New">/mnt/.profile</font></strong>). <br>
            <br>
            </font></li>
          <li><font size="2">Copy the files <strong><font face="Courier New">/bin/dac960sh</font></strong>,
            <strong><font face="Courier New">/bin/dac960tk</font></strong>, and <strong><font
            face="Courier New">/bin/dacmon1d</font></strong> to the <strong><font face="Courier New">bin</font></strong>
            directory of the root floppy by entering: <br>
            <br>
            <u><font face="Courier New">#cp /bin/dac960sh /mnt/bin<br>
            #cp /bin/dac960tk /mnt/bin<br>
            #cp /bin/dacmon1d /mnt/bin</font></u></font></li>
        </ul>
      </li>
    </ol>
    <p><strong><font size="2">Using the floppies </font></strong></p>
    <p><font size="2">To boot from the emergency floppies the Mylex BTLD floppy is also
    required. If necessary, refer to <a HREF="unx003.htm">Info Guide UNX003</a> for a full
    description of using emergency floppies and a cpio tape to restore the root filesystem
    onto a blank hard drive. The procedure in this case though is as follows: </font><ol>
      <li><font size="2">Boot from the emergency boot floppy and at the <strong><font
        face="Courier New">Boot</font></strong> prompt enter <u><font face="Courier New">link</font></u>.
        <br>
        <br>
        </font></li>
      <li><font size="2">When asked for the name of the packages to link enter <u><font
        face="Courier New">dac960</font></u> and insert the Mylex BTLD floppy when requested. <br>
        <br>
        </font></li>
      <li><font size="2">Insert the emergency root floppy when asked for the root filesystem
        floppy. <br>
        <br>
        </font></li>
      <li><font size="2">From this point on the use of the emergency floppies is much the same as
        any other system. The steps required to re-create a bootable root filesystem on the <em>system
        drive</em> are as follows (refer to <a HREF="unx003.htm">Info Guide UNX003</a> for more
        detail): <br>
        <br>
        </font><ul>
          <li><font size="2">Use <strong><font face="Courier New">fdisk</font></strong> to create a
            Unix partition. This will probably be the <strong><font face="Courier New">Use entire disk
            for Unix</font></strong> option. <br>
            <br>
            </font></li>
          <li><font size="2">Use <strong><font face="Courier New">divvy</font></strong> to divide the
            partition up into Unix filesystems and create a swap space. <br>
            <br>
            </font></li>
          <li><font size="2">Create the boot blocks and master boot block to make the partition
            bootable. <br>
            <br>
            </font></li>
          <li><font size="2">Check the root filesystem with <strong><font face="Courier New">fsck</font></strong>.
            <br>
            <br>
            </font></li>
          <li><font size="2">Mount the root filesystem and restore the root filesystem cpio backup
            tape. </font></li>
        </ul>
      </li>
    </ol>
    <p><font size="2">Note that Mylex <em>system drives</em> do not appear to SCO Unix as SCSI
    drives or ST506 drives. Therefore the current Unix monitor <strong><font
    face="Courier New">u386mon</font></strong> will not display any drive utilisation
    statistics for them. However, do not attempt to create a bad track table with the <strong><font
    face="Courier New">badtrk</font></strong> command as is usual for ST506/IDE drives. The
    Mylex controller manages media flaws independently of the host operating system. <br>
    <br>
    <br>
    <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0" ALIGN="LEFT" ALT="Back to Top"
    width="14" height="10"></a> <a HREF="#top"><img SRC="../../../graphics/redarr01.gif" BORDER="0"
    ALIGN="RIGHT" ALT="Back to Top" width="14" height="10"></a> </font></p>
    <hr>
    
    <p>&nbsp;</p>
    <p align="center"><img width="486" height="25" src="../../../images/connectd.gif"
    alt="Computing for a Connected World"> </td>
  </tr>
</table>
</body>
</html>
